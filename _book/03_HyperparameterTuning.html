<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="MSc. Friederike Johanna Rosa WÃ¶lke">
<meta name="dcterms.date" content="2023-05-29">

<title>Assignment Statistics KVHEM CZU SS 2024 - 3&nbsp; Script 3 - Hyperparameter Tuning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./04_FinalModels.html" rel="next">
<link href="./02_rfe.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./03_HyperparameterTuning.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Script 3 - Hyperparameter Tuning</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Assignment Statistics KVHEM CZU SS 2024</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/FriedaRosa/Assignment_Statistics_KVHEM_CZU_SS2024" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Download" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download"><i class="bi bi-download"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./Assignment-Statistics-KVHEM-CZU-SS-2024.pdf">
              <i class="bi bi-bi-file-pdf pe-1"></i>
            Download PDF
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="./Assignment-Statistics-KVHEM-CZU-SS-2024.epub">
              <i class="bi bi-bi-journal pe-1"></i>
            Download ePub
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Assignment for PhD Statistics class 2024</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_DataPrep.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Script 1 - Data preparation</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_rfe.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Script 2 - Recursive Feature Selection</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_HyperparameterTuning.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Script 3 - Hyperparameter Tuning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_FinalModels.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Script 4 - FinalModels</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05_VarPart_v2_loop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Script 5 - Variation Partitioning</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06_Predictions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Script 6 - Predictions</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./07_references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#individual-models" id="toc-individual-models" class="nav-link active" data-scroll-target="#individual-models"><span class="header-section-number">3.0.1</span> Individual models</a></li>
  <li><a href="#variable-importances-across-models" id="toc-variable-importances-across-models" class="nav-link" data-scroll-target="#variable-importances-across-models"><span class="header-section-number">3.0.2</span> Variable Importances across models</a></li>
  <li><a href="#resamples-across-models" id="toc-resamples-across-models" class="nav-link" data-scroll-target="#resamples-across-models"><span class="header-section-number">4</span> Resamples across models:</a>
  <ul class="collapse">
  <li><a href="#summary-across-all-analyses" id="toc-summary-across-all-analyses" class="nav-link" data-scroll-target="#summary-across-all-analyses"><span class="header-section-number">4.0.1</span> Summary across all analyses</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/FriedaRosa/Assignment_Statistics_KVHEM_CZU_SS2024/edit/main/03_HyperparameterTuning.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Script 3 - Hyperparameter Tuning</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p><a href="https://friedarosa.github.io">MSc. Friederike Johanna Rosa WÃ¶lke</a> <a href="mailto:wolke@fzp.czu.cz" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> <a href="https://orcid.org/0000-0001-9034-4883" class="quarto-title-author-orcid"> <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1N0NEMjA4MDI1MjA2ODExOTk0QzkzNTEzRjZEQTg1NyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozM0NDOEJGNEZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozM0NDOEJGM0ZGNTcxMUUxODdBOEVCODg2RjdCQ0QwOSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkZDN0YxMTc0MDcyMDY4MTE5NUZFRDc5MUM2MUUwNEREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU3Q0QyMDgwMjUyMDY4MTE5OTRDOTM1MTNGNkRBODU3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+84NovQAAAR1JREFUeNpiZEADy85ZJgCpeCB2QJM6AMQLo4yOL0AWZETSqACk1gOxAQN+cAGIA4EGPQBxmJA0nwdpjjQ8xqArmczw5tMHXAaALDgP1QMxAGqzAAPxQACqh4ER6uf5MBlkm0X4EGayMfMw/Pr7Bd2gRBZogMFBrv01hisv5jLsv9nLAPIOMnjy8RDDyYctyAbFM2EJbRQw+aAWw/LzVgx7b+cwCHKqMhjJFCBLOzAR6+lXX84xnHjYyqAo5IUizkRCwIENQQckGSDGY4TVgAPEaraQr2a4/24bSuoExcJCfAEJihXkWDj3ZAKy9EJGaEo8T0QSxkjSwORsCAuDQCD+QILmD1A9kECEZgxDaEZhICIzGcIyEyOl2RkgwAAhkmC+eAm0TAAAAABJRU5ErkJggg=="></a></p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 29, 2023</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Source custom functions</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">MachineLearning packages</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Load RData/RDS objects to reduce computing time</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"src/functions.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pckgs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"dplyr"</span>, <span class="st">"ggplot2"</span>, <span class="st">"reshape2"</span>, </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">"caret"</span>, <span class="st">"caretEnsemble"</span>, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>           <span class="st">"randomForest"</span>, <span class="st">"ranger"</span>, <span class="st">"gbm"</span>, <span class="st">"xgboost"</span>, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">"gridExtra"</span>, <span class="st">"kableExtra"</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">install_and_load</span>(pckgs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load workspace to save computing time:</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">load</span>(<span class="st">"data/RData/03_reduced_hyper_para_tuning_all_models.RData"</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># make list of models for evaluation ========</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>saved_models <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">Jaccard1 =</span> models_J1, </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>                   <span class="at">Jaccard2 =</span> models_J2, </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">LogRatio1 =</span> models_LR1, </span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">LogRatio2 =</span> models_LR2)</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(saved_models, "data/models/reducedModels/03_List_all_reduced_models.rds")</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="co"># List of variables to keep in each model</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>reduced_predictors <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"data/rds/selected_predictors_list.rds"</span>)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>H1_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"sd_PC1"</span>, <span class="st">"sd_PC2"</span>, <span class="co"># Climatic Niche Breadth</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">"GlobRangeSize_m2"</span>, <span class="st">"IUCN"</span>, <span class="st">"Mass"</span>, <span class="st">"Habitat"</span>, <span class="st">"Habitat.Density"</span>,</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Migration"</span>, <span class="st">"Trophic.Level"</span>, <span class="st">"Trophic.Niche"</span>, <span class="st">"Primary.Lifestyle"</span>,</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">"FP"</span>, <span class="co"># Phylogenetic Distinctness</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Hand.Wing.Index"</span>) <span class="co"># Measure of dispersal ability</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>H2_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AOO"</span>, <span class="st">"rel_occ_Ncells"</span>, <span class="st">"mean_prob_cooccur"</span>, <span class="st">"D_AOO_a"</span>, </span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="st">"moran"</span>, <span class="st">"x_intercept"</span>, <span class="st">"sp_centr_lon"</span>, <span class="st">"sp_centr_lat"</span>,</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"lengthMinRect"</span>, <span class="st">"widthMinRect"</span>, <span class="st">"elonMinRect"</span>, <span class="st">"bearingMinRect"</span>,</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"circ"</span>, <span class="st">"bearing"</span>, <span class="st">"Southernness"</span>, <span class="st">"Westernness"</span>,</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">"rel_maxDist"</span>, <span class="st">"rel_ewDist"</span>, <span class="st">"rel_nsDist"</span>, <span class="st">"rel_elonRatio"</span>,</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    <span class="st">"rel_relCirc"</span>, <span class="st">"rel_circNorm"</span>, <span class="st">"rel_lin"</span>, <span class="st">"Dist_centroid_to_COG"</span>,</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">"maxDist_toBorder_border"</span>, <span class="st">"maxDist_toBorder_centr"</span>,</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">"minDist_toBorder_centr"</span>)</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>H3_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"GammaSR"</span>, <span class="st">"AlphaSR_sp"</span>, <span class="st">"BetaSR_sp"</span>)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>H4_vars <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"dataset"</span>, <span class="st">"mean_area"</span>, <span class="st">"Total_area_samp"</span>, <span class="st">"Total_Ncells_samp"</span>,</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">"mean_cell_length"</span>, <span class="st">"atlas_lengthMinRect"</span>, <span class="st">"atlas_widthMinRect"</span>,</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">"atlas_elonMinRect"</span>, <span class="st">"atlas_circ"</span>, <span class="st">"atlas_bearingMinRect"</span>,</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    <span class="st">"atlas_bearing"</span>, <span class="st">"AtlasCOG_long"</span>, <span class="st">"AtlasCOG_lat"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<section id="individual-models" class="level3" data-number="3.0.1">
<h3 data-number="3.0.1" class="anchored" data-anchor-id="individual-models"><span class="header-section-number">3.0.1</span> Individual models</h3>
<section id="hyperparameter-tuning" class="level4" data-number="3.0.1.1">
<h4 data-number="3.0.1.1" class="anchored" data-anchor-id="hyperparameter-tuning"><span class="header-section-number">3.0.1.1</span> Hyperparameter tuning</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>index_list <span class="ot">&lt;-</span> <span class="fu">list</span>(indices_J1, indices_J2, indices_LR1, indices_LR2)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>dat_train_list <span class="ot">&lt;-</span> <span class="fu">list</span>(dat_train_J1, dat_train_J2, dat_train_LR1, dat_train_LR2)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>saved_models <span class="ot">&lt;-</span> <span class="fu">replicate</span>(<span class="dv">4</span>, <span class="fu">list</span>())</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(saved_models) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"J1"</span>, <span class="st">"J2"</span>, <span class="st">"LR1"</span>, <span class="st">"LR2"</span>)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>response_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Jaccard"</span>, <span class="st">"Jaccard"</span>, <span class="st">"log_R2_1"</span>, <span class="st">"log_R2_1"</span>)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span>(j <span class="cf">in</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>)){</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Loop through differet datasets/Analyses</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  indices <span class="ot">&lt;-</span> index_list[[j]]</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  response <span class="ot">&lt;-</span> response_list[[j]] </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  predictors <span class="ot">&lt;-</span> <span class="fu">rownames</span>(reduced_predictors[[j]])</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Subset the data</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  dat_train <span class="ot">&lt;-</span> dat_train_list[[j]] <span class="sc">%&gt;%</span> </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>                    <span class="fu">select</span>(<span class="fu">any_of</span>(<span class="fu">c</span>(response,predictors)))</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Define training control ==========================================================</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  trainControl <span class="ot">&lt;-</span> <span class="fu">trainControl</span>(</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"repeatedcv"</span>,</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">number =</span> <span class="dv">10</span>,</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">repeats =</span> <span class="dv">3</span>,</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">savePredictions =</span> <span class="st">"final"</span>,</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">returnResamp =</span> <span class="st">"all"</span>,</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">verboseIter =</span> <span class="cn">FALSE</span>,</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">index =</span> indices)</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Train ranger model ==========================================================</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>  tictoc<span class="sc">::</span><span class="fu">tic</span>(<span class="st">"ranger"</span>)</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>  rangerModel_t <span class="ot">&lt;-</span> <span class="fu">train</span>(</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.formula</span>(<span class="fu">paste</span>(response, <span class="st">"~ ."</span>)),</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dat_train,</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"ranger"</span>,</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">trControl =</span> trainControl,</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">importance =</span> <span class="st">"permutation"</span>,</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">scale.permutation.importance =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">num.trees =</span> <span class="dv">5000</span>,</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">respect.unordered.factors =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">oob.error =</span> <span class="cn">TRUE</span>,</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">tuneLength =</span> <span class="dv">20</span>)</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">saveRDS</span>(rangerModel_t, <span class="fu">paste0</span>(<span class="st">"data/models/reducedModels/03_reduced_rangerModel_"</span>, response, j, <span class="st">"all.rds"</span>))</span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>  tictoc<span class="sc">::</span><span class="fu">toc</span>()</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>  <span class="co"># rangerModel_t &lt;- readRDS( paste0("data/models/reducedModels/rangerModel_", response, j, "all.rds"))</span></span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Model results:</span></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>  p_rangerModel <span class="ot">&lt;-</span> <span class="fu">plot</span>(rangerModel_t)</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>  p_rangerModel</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>  rangerModel_t<span class="sc">$</span>finalModel</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Train xgbTree model ==========================================================</span></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>  xgb_grid <span class="ot">&lt;-</span> <span class="fu">expand.grid</span>(</span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">nrounds =</span> <span class="fu">c</span>(<span class="dv">1000</span>),</span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">eta =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.3</span>),</span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_depth =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>, <span class="dv">5</span>),</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>    <span class="at">gamma =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">0.01</span>, <span class="fl">0.1</span>),</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>    <span class="at">colsample_bytree =</span> <span class="fl">0.6</span>,</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_child_weight =</span> <span class="dv">1</span>,</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">subsample =</span><span class="dv">1</span>)</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>  tictoc<span class="sc">::</span><span class="fu">tic</span>(<span class="st">"xgb"</span>)</span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>  xgbModel_t <span class="ot">&lt;-</span> <span class="fu">train</span>(</span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.formula</span>(<span class="fu">paste</span>(response, <span class="st">"~ ."</span>)),</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dat_train,</span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"xgbTree"</span>,</span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">trControl =</span> trainControl,</span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>    <span class="at">tuneGrid =</span> xgb_grid)</span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">saveRDS</span>(xgbModel_t, <span class="fu">paste0</span>(<span class="st">"data/models/reducedModels/03_reduced_xgbModel_all_"</span>, response, j, <span class="st">"TLCUSTOM.rds"</span>))</span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>  tictoc<span class="sc">::</span><span class="fu">toc</span>()</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>  <span class="co"># xgbModel_t &lt;- readRDS(paste0("data/models/reducedModels/xgbModel_all_", response, j, "TLCUSTOM.rds"))</span></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Model results:</span></span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a>  p_xgbModel <span class="ot">&lt;-</span> <span class="fu">plot</span>(xgbModel_t)</span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>  p_xgbModel</span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(xgbModel_t<span class="sc">$</span>results, RMSE)</span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(xgbModel_t<span class="sc">$</span>results, Rsquared)</span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>  <span class="do">## Train gbm model ==========================================================</span></span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>  tictoc<span class="sc">::</span><span class="fu">tic</span>(<span class="st">"gbm"</span>)</span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>  gbmModel_t <span class="ot">&lt;-</span> <span class="fu">train</span>(</span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">as.formula</span>(<span class="fu">paste</span>(response, <span class="st">"~ ."</span>)),</span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> dat_train,</span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">method =</span> <span class="st">"gbm"</span>,</span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>    <span class="at">trControl =</span> trainControl,</span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>    <span class="at">tuneLength=</span> <span class="dv">20</span>,</span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a>    <span class="at">verbose =</span> <span class="cn">FALSE</span>)</span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a>  <span class="fu">saveRDS</span>(gbmModel_t, <span class="fu">paste0</span>(<span class="st">"data/models/reducedModels/03_reduced_gbmModel_"</span>, response, j, <span class="st">"all.rds"</span>))</span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a>  tictoc<span class="sc">::</span><span class="fu">toc</span>()</span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a>  <span class="do">### Model results:</span></span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary.gbm</span>(gbmModel_t<span class="sc">$</span>finalModel)</span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a>  p_gbmModel <span class="ot">&lt;-</span> <span class="fu">plot</span>(gbmModel_t)</span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a>  p_gbmModel</span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>  gbmModel_t<span class="sc">$</span>finalModel</span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_min</span>(gbmModel_t<span class="sc">$</span>results, RMSE)</span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(gbmModel_t<span class="sc">$</span>results, Rsquared)</span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a>  saved_models[[j]] <span class="ot">&lt;-</span> <span class="fu">list</span>(rangerModel_t, xgbModel_t, gbmModel_t)</span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a><span class="co"># saveRDS(saved_models, "data/models/reducedModels/03_List_all_reduced_models.rds")</span></span>
<span id="cb4-110"><a href="#cb4-110" aria-hidden="true" tabindex="-1"></a><span class="co"># save.image("data/RData/03_reduced_hyper_para_tuning.RData")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="model-evaluation" class="level4" data-number="3.0.1.2">
<h4 data-number="3.0.1.2" class="anchored" data-anchor-id="model-evaluation"><span class="header-section-number">3.0.1.2</span> Model Evaluation</h4>
<p>Here we will extract the model performance, best hyperparameters and variable importances from each model and compare them.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Jaccard 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Jaccard 2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Log Ratio 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Log Ratio 2</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># reduced predictor models:</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>ranger_red <span class="ot">&lt;-</span> saved_models[[<span class="dv">1</span>]][[<span class="dv">1</span>]]</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>xgb_red <span class="ot">&lt;-</span> saved_models[[<span class="dv">1</span>]][[<span class="dv">2</span>]]</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>gbm_red <span class="ot">&lt;-</span> saved_models[[<span class="dv">1</span>]][[<span class="dv">3</span>]]</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="do">## Ranger =====</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>ranger_red<span class="sc">$</span>finalModel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Ranger result

Call:
 ranger::ranger(dependent.variable.name = ".outcome", data = x,      mtry = min(param$mtry, ncol(x)), min.node.size = param$min.node.size,      splitrule = as.character(param$splitrule), write.forest = TRUE,      probability = classProbs, ...) 

Type:                             Regression 
Number of trees:                  5000 
Sample size:                      826 
Number of independent variables:  36 
Mtry:                             12 
Target node size:                 5 
Variable importance mode:         permutation 
Splitrule:                        variance 
OOB prediction error (MSE):       0.01255428 
R squared (OOB):                  0.842953 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>ranger_red<span class="sc">$</span>results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   mtry min.node.size  splitrule      RMSE  Rsquared        MAE      RMSESD
1     2             5   variance 0.1254667 0.8251798 0.09432341 0.007866969
2     2             5 extratrees 0.1433463 0.8069389 0.11376738 0.007243472
3     3             5   variance 0.1162028 0.8378857 0.08264697 0.008493842
4     3             5 extratrees 0.1239683 0.8257686 0.09142955 0.008905706
5     5             5   variance 0.1127714 0.8431616 0.07726843 0.009281521
6     5             5 extratrees 0.1158077 0.8377883 0.08107427 0.009436044
7     7             5   variance 0.1120340 0.8441887 0.07558047 0.009731207
8     7             5 extratrees 0.1139346 0.8406778 0.07817203 0.009799280
9     9             5   variance 0.1114101 0.8454293 0.07451086 0.010060776
10    9             5 extratrees 0.1131202 0.8419704 0.07666131 0.009829115
11   10             5   variance 0.1113424 0.8454794 0.07416096 0.010251817
12   10             5 extratrees 0.1127374 0.8427572 0.07612782 0.009882439
13   12             5   variance 0.1111970 0.8455695 0.07364971 0.010845162
14   12             5 extratrees 0.1125581 0.8428030 0.07552565 0.010047851
15   14             5   variance 0.1112450 0.8452995 0.07329932 0.011082041
16   14             5 extratrees 0.1123174 0.8431734 0.07502352 0.010198308
17   16             5   variance 0.1114307 0.8446849 0.07299860 0.011160060
18   16             5 extratrees 0.1122693 0.8431345 0.07470521 0.010309894
19   18             5   variance 0.1113786 0.8447690 0.07278867 0.011339312
20   18             5 extratrees 0.1122118 0.8431386 0.07441526 0.010351843
21   19             5   variance 0.1116185 0.8440440 0.07272567 0.011550396
22   19             5 extratrees 0.1120336 0.8435511 0.07421197 0.010503697
23   21             5   variance 0.1117216 0.8437035 0.07259284 0.011623650
24   21             5 extratrees 0.1122036 0.8429443 0.07407919 0.010530430
25   23             5   variance 0.1118380 0.8432769 0.07255752 0.011993990
26   23             5 extratrees 0.1120763 0.8432083 0.07382346 0.010593439
27   25             5   variance 0.1120119 0.8428018 0.07248863 0.012029803
28   25             5 extratrees 0.1121203 0.8430174 0.07370156 0.010599123
29   27             5   variance 0.1121443 0.8423662 0.07247942 0.012261101
30   27             5 extratrees 0.1121384 0.8429046 0.07356852 0.010666715
31   28             5   variance 0.1122884 0.8419467 0.07247270 0.012323806
32   28             5 extratrees 0.1120747 0.8430957 0.07348672 0.010652228
33   30             5   variance 0.1125005 0.8413136 0.07253342 0.012482113
34   30             5 extratrees 0.1121711 0.8427283 0.07340361 0.010788097
35   32             5   variance 0.1126637 0.8408520 0.07256008 0.012454792
36   32             5 extratrees 0.1123006 0.8423463 0.07337539 0.010748973
37   34             5   variance 0.1129129 0.8401382 0.07268725 0.012689290
38   34             5 extratrees 0.1122970 0.8422977 0.07328178 0.010836723
39   36             5   variance 0.1131537 0.8393838 0.07281461 0.012812062
40   36             5 extratrees 0.1122648 0.8423172 0.07314710 0.010951207
   RsquaredSD       MAESD
1  0.03055050 0.003974652
2  0.03397330 0.004744941
3  0.02879728 0.003775940
4  0.03217047 0.005025291
5  0.02906748 0.003851168
6  0.03001990 0.004825038
7  0.02956819 0.003892900
8  0.03032316 0.004813523
9  0.02989661 0.003836167
10 0.02988290 0.004745772
11 0.03028848 0.003914733
12 0.02981438 0.004777269
13 0.03184243 0.004084179
14 0.03022429 0.004946745
15 0.03248639 0.004079712
16 0.03040113 0.004842249
17 0.03259931 0.004031980
18 0.03053069 0.004881325
19 0.03300013 0.004127697
20 0.03063005 0.004957603
21 0.03370734 0.004120164
22 0.03089294 0.005019679
23 0.03388870 0.004159916
24 0.03107748 0.005036566
25 0.03502004 0.004190612
26 0.03108341 0.005021662
27 0.03496946 0.004085399
28 0.03100310 0.005003647
29 0.03573363 0.004072790
30 0.03118679 0.004985610
31 0.03593341 0.004161666
32 0.03112147 0.004939953
33 0.03632342 0.004105860
34 0.03150875 0.005115531
35 0.03633219 0.004116852
36 0.03143579 0.005014301
37 0.03703642 0.004177651
38 0.03159180 0.005004110
39 0.03744262 0.004201171
40 0.03191157 0.004981865</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ranger_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="do">## XGB ======</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(xgb_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>xgb_red</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>eXtreme Gradient Boosting 

826 samples
 19 predictor

No pre-processing
Resampling: Cross-Validated (10 fold, repeated 3 times) 
Summary of sample sizes: 662, 662, 662, 662, 662, 662, ... 
Resampling results across tuning parameters:

  eta  max_depth  gamma  RMSE       Rsquared   MAE       
  0.1  2          0.00   0.1118070  0.8446102  0.07369056
  0.1  2          0.01   0.1102063  0.8478990  0.07321260
  0.1  2          0.10   0.1194187  0.8236726  0.08266637
  0.1  3          0.00   0.1097821  0.8490233  0.07146877
  0.1  3          0.01   0.1105528  0.8472857  0.07279250
  0.1  3          0.10   0.1137796  0.8394713  0.07826346
  0.1  5          0.00   0.1096201  0.8498558  0.07206656
  0.1  5          0.01   0.1101902  0.8484793  0.07238673
  0.1  5          0.10   0.1130442  0.8417327  0.07777401
  0.3  2          0.00   0.1141524  0.8374329  0.07623701
  0.3  2          0.01   0.1133456  0.8401277  0.07609019
  0.3  2          0.10   0.1199386  0.8209386  0.08380543
  0.3  3          0.00   0.1133470  0.8409218  0.07640170
  0.3  3          0.01   0.1126855  0.8421184  0.07477419
  0.3  3          0.10   0.1159277  0.8326335  0.07964922
  0.3  5          0.00   0.1144612  0.8368645  0.07534337
  0.3  5          0.01   0.1129137  0.8408449  0.07452666
  0.3  5          0.10   0.1179038  0.8257194  0.07989957

Tuning parameter 'nrounds' was held constant at a value of 1000

Tuning parameter 'min_child_weight' was held constant at a value of 1

Tuning parameter 'subsample' was held constant at a value of 1
RMSE was used to select the optimal model using the smallest value.
The final values used for the model were nrounds = 1000, max_depth = 5, eta
 = 0.1, gamma = 0, colsample_bytree = 0.6, min_child_weight = 1 and subsample
 = 1.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="do">## GBM =====</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>gbm_red<span class="sc">$</span>finalModel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A gradient boosted model with gaussian loss function.
300 iterations were performed.
There were 36 predictors of which 31 had non-zero influence.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>gbm_red</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Stochastic Gradient Boosting 

826 samples
 19 predictor

No pre-processing
Resampling: Cross-Validated (10 fold, repeated 3 times) 
Summary of sample sizes: 662, 662, 662, 662, 662, 662, ... 
Resampling results across tuning parameters:

  interaction.depth  n.trees  RMSE       Rsquared   MAE       
   1                   50     0.1453374  0.7558990  0.11270542
   1                  100     0.1289298  0.7968217  0.09436793
   1                  150     0.1227746  0.8130044  0.08692107
   1                  200     0.1211241  0.8176810  0.08455328
   1                  250     0.1186376  0.8243122  0.08194397
   1                  300     0.1175363  0.8275557  0.08088948
   1                  350     0.1168408  0.8295444  0.08009465
   1                  400     0.1166267  0.8302205  0.07976559
   1                  450     0.1165562  0.8302532  0.07977221
   1                  500     0.1163796  0.8305591  0.07940275
   1                  550     0.1164298  0.8307084  0.07930831
   1                  600     0.1166490  0.8301586  0.07916662
   1                  650     0.1166229  0.8302922  0.07903669
   1                  700     0.1164948  0.8306774  0.07876904
   1                  750     0.1162696  0.8312881  0.07880899
   1                  800     0.1162676  0.8315504  0.07858171
   1                  850     0.1160615  0.8319353  0.07834910
   1                  900     0.1163859  0.8311009  0.07839108
   1                  950     0.1164178  0.8313684  0.07838938
   1                 1000     0.1164582  0.8313685  0.07819886
   2                   50     0.1247676  0.8109618  0.09000949
   2                  100     0.1169673  0.8298555  0.08096768
   2                  150     0.1155937  0.8330150  0.07900767
   2                  200     0.1148729  0.8351281  0.07805390
   2                  250     0.1137115  0.8385979  0.07690696
   2                  300     0.1139379  0.8378319  0.07673802
   2                  350     0.1138836  0.8381328  0.07656764
   2                  400     0.1137209  0.8386412  0.07648715
   2                  450     0.1139224  0.8382901  0.07645012
   2                  500     0.1139598  0.8382803  0.07648368
   2                  550     0.1142135  0.8378188  0.07650678
   2                  600     0.1141230  0.8380017  0.07648719
   2                  650     0.1142878  0.8377684  0.07660950
   2                  700     0.1140709  0.8383336  0.07658041
   2                  750     0.1139938  0.8385548  0.07644036
   2                  800     0.1139313  0.8385619  0.07645051
   2                  850     0.1137421  0.8391433  0.07649776
   2                  900     0.1137695  0.8390701  0.07654395
   2                  950     0.1137925  0.8388728  0.07649111
   2                 1000     0.1140195  0.8385503  0.07666889
   3                   50     0.1189724  0.8250200  0.08342629
   3                  100     0.1140092  0.8376412  0.07759369
   3                  150     0.1128369  0.8411181  0.07582167
   3                  200     0.1125331  0.8417550  0.07544162
   3                  250     0.1128486  0.8409744  0.07557854
   3                  300     0.1122436  0.8426731  0.07525752
   3                  350     0.1128212  0.8412139  0.07552856
   3                  400     0.1127797  0.8412309  0.07538995
   3                  450     0.1129368  0.8408223  0.07554079
   3                  500     0.1129223  0.8407906  0.07549643
   3                  550     0.1129996  0.8408311  0.07553183
   3                  600     0.1131481  0.8404655  0.07567619
   3                  650     0.1132707  0.8402120  0.07581446
   3                  700     0.1131610  0.8405827  0.07568361
   3                  750     0.1129443  0.8412505  0.07561206
   3                  800     0.1130614  0.8409369  0.07566536
   3                  850     0.1130207  0.8409924  0.07569383
   3                  900     0.1131045  0.8407793  0.07578185
   3                  950     0.1131567  0.8407358  0.07578853
   3                 1000     0.1132802  0.8402919  0.07602095
   4                   50     0.1154835  0.8341507  0.07837077
   4                  100     0.1126572  0.8415089  0.07488959
   4                  150     0.1116744  0.8445624  0.07379697
   4                  200     0.1114789  0.8451936  0.07360589
   4                  250     0.1113986  0.8452521  0.07353219
   4                  300     0.1110988  0.8458559  0.07376527
   4                  350     0.1108353  0.8468867  0.07378405
   4                  400     0.1112453  0.8458057  0.07411103
   4                  450     0.1114257  0.8455253  0.07424983
   4                  500     0.1115432  0.8452468  0.07440587
   4                  550     0.1117424  0.8447426  0.07464034
   4                  600     0.1116771  0.8450425  0.07458276
   4                  650     0.1121899  0.8436529  0.07485827
   4                  700     0.1123517  0.8433128  0.07498572
   4                  750     0.1122322  0.8436231  0.07488180
   4                  800     0.1124768  0.8429594  0.07496479
   4                  850     0.1126783  0.8424707  0.07504317
   4                  900     0.1128018  0.8421813  0.07516802
   4                  950     0.1128704  0.8420455  0.07523006
   4                 1000     0.1128398  0.8421247  0.07532680
   5                   50     0.1147182  0.8357200  0.07744488
   5                  100     0.1127834  0.8409669  0.07443970
   5                  150     0.1127285  0.8411105  0.07432455
   5                  200     0.1129253  0.8408366  0.07433093
   5                  250     0.1126308  0.8417328  0.07430120
   5                  300     0.1124856  0.8421890  0.07400270
   5                  350     0.1125105  0.8421371  0.07408824
   5                  400     0.1125924  0.8417729  0.07419449
   5                  450     0.1126305  0.8418316  0.07424855
   5                  500     0.1126437  0.8418528  0.07434069
   5                  550     0.1128031  0.8413877  0.07443978
   5                  600     0.1129749  0.8410222  0.07464416
   5                  650     0.1130505  0.8407691  0.07481935
   5                  700     0.1131943  0.8403461  0.07488762
   5                  750     0.1132781  0.8401328  0.07502383
   5                  800     0.1132754  0.8400697  0.07504798
   5                  850     0.1132677  0.8400960  0.07501872
   5                  900     0.1134174  0.8397231  0.07510891
   5                  950     0.1135016  0.8395041  0.07514660
   5                 1000     0.1136219  0.8392270  0.07523409
   6                   50     0.1134738  0.8387884  0.07630523
   6                  100     0.1112866  0.8449952  0.07437753
   6                  150     0.1116498  0.8441935  0.07451806
   6                  200     0.1114086  0.8450053  0.07433774
   6                  250     0.1116904  0.8446003  0.07450528
   6                  300     0.1116405  0.8447067  0.07460745
   6                  350     0.1120175  0.8437966  0.07477339
   6                  400     0.1119667  0.8440214  0.07476552
   6                  450     0.1121760  0.8434861  0.07499075
   6                  500     0.1122244  0.8433772  0.07514079
   6                  550     0.1122506  0.8433603  0.07526066
   6                  600     0.1122688  0.8433015  0.07528187
   6                  650     0.1123367  0.8431433  0.07535241
   6                  700     0.1124893  0.8427805  0.07549024
   6                  750     0.1124589  0.8428081  0.07553631
   6                  800     0.1125934  0.8424594  0.07564791
   6                  850     0.1126293  0.8423557  0.07570012
   6                  900     0.1127100  0.8421271  0.07570814
   6                  950     0.1127572  0.8419953  0.07577021
   6                 1000     0.1127874  0.8419329  0.07580536
   7                   50     0.1125015  0.8422207  0.07506903
   7                  100     0.1111397  0.8459996  0.07323311
   7                  150     0.1111699  0.8460714  0.07309644
   7                  200     0.1116112  0.8448118  0.07374291
   7                  250     0.1113905  0.8454904  0.07355970
   7                  300     0.1115168  0.8449676  0.07370424
   7                  350     0.1115537  0.8449419  0.07386732
   7                  400     0.1116880  0.8445208  0.07404607
   7                  450     0.1118584  0.8441245  0.07424290
   7                  500     0.1118135  0.8443609  0.07427428
   7                  550     0.1118715  0.8441660  0.07432583
   7                  600     0.1120839  0.8436000  0.07449454
   7                  650     0.1122996  0.8430489  0.07466681
   7                  700     0.1124466  0.8426628  0.07477854
   7                  750     0.1124656  0.8426620  0.07484187
   7                  800     0.1125503  0.8424901  0.07492728
   7                  850     0.1126420  0.8422935  0.07505970
   7                  900     0.1127063  0.8421388  0.07511347
   7                  950     0.1127420  0.8420142  0.07514704
   7                 1000     0.1127848  0.8419209  0.07519591
   8                   50     0.1134442  0.8390744  0.07517079
   8                  100     0.1113542  0.8453119  0.07365406
   8                  150     0.1111771  0.8462489  0.07358146
   8                  200     0.1117109  0.8448927  0.07391530
   8                  250     0.1113348  0.8460525  0.07379929
   8                  300     0.1114117  0.8460919  0.07380980
   8                  350     0.1113601  0.8461744  0.07371058
   8                  400     0.1115123  0.8458106  0.07371669
   8                  450     0.1115202  0.8457846  0.07375731
   8                  500     0.1115910  0.8456670  0.07389795
   8                  550     0.1117072  0.8454298  0.07398178
   8                  600     0.1117628  0.8452755  0.07405285
   8                  650     0.1119484  0.8448660  0.07414512
   8                  700     0.1119255  0.8449389  0.07418292
   8                  750     0.1118843  0.8450571  0.07421084
   8                  800     0.1120240  0.8447453  0.07431664
   8                  850     0.1121129  0.8445211  0.07437079
   8                  900     0.1121847  0.8443480  0.07447542
   8                  950     0.1122337  0.8442344  0.07448805
   8                 1000     0.1122457  0.8442135  0.07452872
   9                   50     0.1121301  0.8430789  0.07446649
   9                  100     0.1106031  0.8471191  0.07303017
   9                  150     0.1113339  0.8455348  0.07312638
   9                  200     0.1116384  0.8447969  0.07336973
   9                  250     0.1117298  0.8445624  0.07370333
   9                  300     0.1114822  0.8453314  0.07377300
   9                  350     0.1115669  0.8451223  0.07384065
   9                  400     0.1117214  0.8447831  0.07402333
   9                  450     0.1117696  0.8446269  0.07406763
   9                  500     0.1119380  0.8442322  0.07426571
   9                  550     0.1120356  0.8440328  0.07439376
   9                  600     0.1121426  0.8437248  0.07449799
   9                  650     0.1121849  0.8436342  0.07456437
   9                  700     0.1122436  0.8434723  0.07460770
   9                  750     0.1123410  0.8432376  0.07471884
   9                  800     0.1123425  0.8432636  0.07475188
   9                  850     0.1124113  0.8430882  0.07481762
   9                  900     0.1124623  0.8429731  0.07483556
   9                  950     0.1124724  0.8429332  0.07485113
   9                 1000     0.1124804  0.8429258  0.07486100
  10                   50     0.1125329  0.8419627  0.07423121
  10                  100     0.1109795  0.8463898  0.07302537
  10                  150     0.1107044  0.8469210  0.07302168
  10                  200     0.1103046  0.8479983  0.07276967
  10                  250     0.1101989  0.8483237  0.07275326
  10                  300     0.1099151  0.8491608  0.07268969
  10                  350     0.1101296  0.8487303  0.07284724
  10                  400     0.1102292  0.8484347  0.07288301
  10                  450     0.1102154  0.8484738  0.07294780
  10                  500     0.1102776  0.8483017  0.07292208
  10                  550     0.1102967  0.8482732  0.07297980
  10                  600     0.1103522  0.8481305  0.07304615
  10                  650     0.1103438  0.8481346  0.07311375
  10                  700     0.1103962  0.8480408  0.07318450
  10                  750     0.1105087  0.8477763  0.07327629
  10                  800     0.1104959  0.8478212  0.07328697
  10                  850     0.1105327  0.8477226  0.07332758
  10                  900     0.1105954  0.8475670  0.07337949
  10                  950     0.1105441  0.8477055  0.07336182
  10                 1000     0.1105557  0.8476579  0.07337891
  11                   50     0.1125197  0.8414815  0.07368924
  11                  100     0.1110939  0.8455271  0.07274269
  11                  150     0.1112469  0.8452484  0.07289503
  11                  200     0.1114980  0.8447607  0.07304767
  11                  250     0.1117493  0.8442900  0.07323927
  11                  300     0.1120365  0.8434408  0.07349975
  11                  350     0.1120915  0.8433073  0.07359549
  11                  400     0.1122045  0.8430514  0.07361647
  11                  450     0.1121791  0.8430437  0.07369199
  11                  500     0.1123262  0.8427237  0.07380589
  11                  550     0.1123061  0.8428324  0.07386247
  11                  600     0.1124338  0.8425433  0.07397561
  11                  650     0.1124787  0.8424397  0.07404825
  11                  700     0.1125376  0.8422566  0.07410800
  11                  750     0.1125699  0.8422021  0.07416902
  11                  800     0.1126495  0.8419872  0.07421064
  11                  850     0.1126935  0.8419189  0.07421886
  11                  900     0.1127041  0.8418878  0.07422131
  11                  950     0.1127020  0.8418864  0.07423385
  11                 1000     0.1127409  0.8418014  0.07428164
  12                   50     0.1138047  0.8385718  0.07434719
  12                  100     0.1122265  0.8431903  0.07282290
  12                  150     0.1122766  0.8429706  0.07286829
  12                  200     0.1126828  0.8419639  0.07353919
  12                  250     0.1128720  0.8414933  0.07380936
  12                  300     0.1125650  0.8423696  0.07390821
  12                  350     0.1126444  0.8422611  0.07400306
  12                  400     0.1126037  0.8424018  0.07413544
  12                  450     0.1126501  0.8422381  0.07424561
  12                  500     0.1127401  0.8420509  0.07435252
  12                  550     0.1127314  0.8420666  0.07445691
  12                  600     0.1127963  0.8419111  0.07454040
  12                  650     0.1127702  0.8420194  0.07456929
  12                  700     0.1127896  0.8419794  0.07461111
  12                  750     0.1128090  0.8419230  0.07463127
  12                  800     0.1127870  0.8419980  0.07462415
  12                  850     0.1128296  0.8419052  0.07467478
  12                  900     0.1128188  0.8419309  0.07467296
  12                  950     0.1128546  0.8418360  0.07471009
  12                 1000     0.1128452  0.8418740  0.07472713
  13                   50     0.1142697  0.8377481  0.07420000
  13                  100     0.1126579  0.8428432  0.07331850
  13                  150     0.1130368  0.8420538  0.07380871
  13                  200     0.1126539  0.8432476  0.07377520
  13                  250     0.1127526  0.8429539  0.07390364
  13                  300     0.1129154  0.8426248  0.07411403
  13                  350     0.1128190  0.8428538  0.07405083
  13                  400     0.1129205  0.8426879  0.07415125
  13                  450     0.1128204  0.8428946  0.07418998
  13                  500     0.1129501  0.8425824  0.07431134
  13                  550     0.1129461  0.8425239  0.07437962
  13                  600     0.1129409  0.8425408  0.07443808
  13                  650     0.1129371  0.8425598  0.07443888
  13                  700     0.1129351  0.8425863  0.07442023
  13                  750     0.1130065  0.8424000  0.07443876
  13                  800     0.1130398  0.8423019  0.07448059
  13                  850     0.1130509  0.8423064  0.07447182
  13                  900     0.1130906  0.8421975  0.07450368
  13                  950     0.1130594  0.8422888  0.07448156
  13                 1000     0.1130608  0.8422905  0.07448304
  14                   50     0.1126369  0.8420395  0.07354179
  14                  100     0.1128960  0.8416422  0.07348016
  14                  150     0.1123394  0.8433392  0.07318046
  14                  200     0.1122478  0.8435616  0.07327454
  14                  250     0.1124516  0.8429707  0.07360471
  14                  300     0.1127593  0.8421768  0.07385269
  14                  350     0.1129961  0.8415917  0.07413896
  14                  400     0.1130062  0.8416126  0.07416940
  14                  450     0.1130618  0.8414101  0.07432499
  14                  500     0.1129875  0.8416486  0.07432808
  14                  550     0.1130492  0.8414819  0.07437773
  14                  600     0.1130555  0.8414152  0.07443019
  14                  650     0.1131076  0.8413375  0.07451082
  14                  700     0.1131065  0.8413504  0.07453191
  14                  750     0.1130964  0.8413805  0.07455071
  14                  800     0.1130887  0.8414151  0.07454242
  14                  850     0.1131360  0.8413176  0.07458052
  14                  900     0.1131351  0.8413214  0.07459388
  14                  950     0.1130822  0.8414517  0.07456862
  14                 1000     0.1131068  0.8413938  0.07459236
  15                   50     0.1131305  0.8403465  0.07349639
  15                  100     0.1123321  0.8431827  0.07287891
  15                  150     0.1118004  0.8446679  0.07282148
  15                  200     0.1120324  0.8439525  0.07332044
  15                  250     0.1119005  0.8443481  0.07349359
  15                  300     0.1116865  0.8449179  0.07357513
  15                  350     0.1119159  0.8442780  0.07376522
  15                  400     0.1117553  0.8447825  0.07373375
  15                  450     0.1117660  0.8448326  0.07389888
  15                  500     0.1115844  0.8452712  0.07385394
  15                  550     0.1118022  0.8447157  0.07395732
  15                  600     0.1118108  0.8447591  0.07399147
  15                  650     0.1118719  0.8445354  0.07403653
  15                  700     0.1118839  0.8445297  0.07404660
  15                  750     0.1118374  0.8446646  0.07403235
  15                  800     0.1118474  0.8446509  0.07406386
  15                  850     0.1118260  0.8447102  0.07403923
  15                  900     0.1117808  0.8448196  0.07401107
  15                  950     0.1117840  0.8448252  0.07402911
  15                 1000     0.1117652  0.8448745  0.07401993
  16                   50     0.1141391  0.8375297  0.07406268
  16                  100     0.1121129  0.8435288  0.07292953
  16                  150     0.1121899  0.8435102  0.07338521
  16                  200     0.1119181  0.8442792  0.07344087
  16                  250     0.1122253  0.8435785  0.07393778
  16                  300     0.1122620  0.8434988  0.07417501
  16                  350     0.1126126  0.8426088  0.07453239
  16                  400     0.1124789  0.8429325  0.07454633
  16                  450     0.1125580  0.8426936  0.07469981
  16                  500     0.1125500  0.8426901  0.07472204
  16                  550     0.1125751  0.8426911  0.07474228
  16                  600     0.1125733  0.8426905  0.07477102
  16                  650     0.1126125  0.8425720  0.07482068
  16                  700     0.1125686  0.8427024  0.07481747
  16                  750     0.1126200  0.8425544  0.07483699
  16                  800     0.1125920  0.8426440  0.07484748
  16                  850     0.1125509  0.8427445  0.07483909
  16                  900     0.1125916  0.8426379  0.07487934
  16                  950     0.1126015  0.8426075  0.07488019
  16                 1000     0.1125854  0.8426562  0.07487126
  17                   50     0.1133941  0.8398378  0.07294471
  17                  100     0.1126347  0.8423077  0.07290355
  17                  150     0.1137885  0.8392116  0.07402004
  17                  200     0.1139283  0.8387646  0.07444590
  17                  250     0.1140582  0.8385842  0.07466001
  17                  300     0.1141314  0.8384539  0.07476493
  17                  350     0.1140994  0.8385512  0.07480841
  17                  400     0.1142548  0.8381093  0.07490541
  17                  450     0.1141576  0.8383890  0.07490032
  17                  500     0.1142423  0.8381209  0.07494723
  17                  550     0.1141920  0.8383328  0.07496546
  17                  600     0.1141366  0.8384829  0.07491644
  17                  650     0.1142033  0.8383281  0.07498024
  17                  700     0.1141768  0.8384235  0.07496827
  17                  750     0.1142274  0.8383156  0.07502256
  17                  800     0.1142559  0.8382422  0.07503381
  17                  850     0.1142619  0.8382555  0.07505778
  17                  900     0.1143011  0.8381534  0.07507514
  17                  950     0.1143168  0.8381244  0.07508052
  17                 1000     0.1143637  0.8380077  0.07509405
  18                   50     0.1133819  0.8398295  0.07350387
  18                  100     0.1136137  0.8396218  0.07364100
  18                  150     0.1130604  0.8411272  0.07365593
  18                  200     0.1134891  0.8401435  0.07386500
  18                  250     0.1132350  0.8408405  0.07394343
  18                  300     0.1133004  0.8406767  0.07406930
  18                  350     0.1134083  0.8404483  0.07420219
  18                  400     0.1135125  0.8401787  0.07425763
  18                  450     0.1133526  0.8406305  0.07421093
  18                  500     0.1133832  0.8405383  0.07430299
  18                  550     0.1134025  0.8405343  0.07431838
  18                  600     0.1134555  0.8403742  0.07435045
  18                  650     0.1134723  0.8403659  0.07432233
  18                  700     0.1134564  0.8403773  0.07431042
  18                  750     0.1134600  0.8403946  0.07434606
  18                  800     0.1134416  0.8404452  0.07431402
  18                  850     0.1134453  0.8404420  0.07433191
  18                  900     0.1134832  0.8403340  0.07433309
  18                  950     0.1134722  0.8403798  0.07432612
  18                 1000     0.1134970  0.8403208  0.07432418
  19                   50     0.1128946  0.8401795  0.07299429
  19                  100     0.1132095  0.8399601  0.07333296
  19                  150     0.1130428  0.8403917  0.07356504
  19                  200     0.1133440  0.8394295  0.07399058
  19                  250     0.1131280  0.8400183  0.07423971
  19                  300     0.1136914  0.8386044  0.07454144
  19                  350     0.1135952  0.8388618  0.07466089
  19                  400     0.1135656  0.8389527  0.07481595
  19                  450     0.1136120  0.8388584  0.07485000
  19                  500     0.1134450  0.8393081  0.07478708
  19                  550     0.1134875  0.8392416  0.07487141
  19                  600     0.1135867  0.8390107  0.07495247
  19                  650     0.1135482  0.8391352  0.07495277
  19                  700     0.1136328  0.8388962  0.07499157
  19                  750     0.1135513  0.8391350  0.07498136
  19                  800     0.1135918  0.8390274  0.07501198
  19                  850     0.1136301  0.8389561  0.07503862
  19                  900     0.1136142  0.8390024  0.07502570
  19                  950     0.1136217  0.8389901  0.07504057
  19                 1000     0.1136317  0.8389646  0.07505510
  20                   50     0.1133590  0.8398770  0.07329153
  20                  100     0.1133497  0.8404356  0.07362630
  20                  150     0.1133742  0.8406328  0.07369263
  20                  200     0.1134622  0.8403462  0.07386509
  20                  250     0.1135787  0.8399785  0.07398267
  20                  300     0.1134219  0.8404992  0.07388051
  20                  350     0.1136676  0.8398728  0.07406826
  20                  400     0.1135035  0.8403044  0.07408810
  20                  450     0.1135800  0.8401002  0.07409903
  20                  500     0.1134690  0.8403542  0.07406907
  20                  550     0.1133482  0.8406803  0.07403952
  20                  600     0.1133517  0.8406998  0.07407751
  20                  650     0.1133925  0.8406453  0.07409429
  20                  700     0.1133773  0.8406790  0.07410704
  20                  750     0.1133733  0.8406936  0.07411591
  20                  800     0.1133378  0.8408165  0.07414581
  20                  850     0.1133412  0.8408601  0.07415678
  20                  900     0.1132905  0.8409679  0.07411478
  20                  950     0.1133220  0.8408902  0.07411604
  20                 1000     0.1133335  0.8408656  0.07411751

Tuning parameter 'shrinkage' was held constant at a value of 0.1

Tuning parameter 'n.minobsinnode' was held constant at a value of 10
RMSE was used to select the optimal model using the smallest value.
The final values used for the model were n.trees = 300, interaction.depth =
 10, shrinkage = 0.1 and n.minobsinnode = 10.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>models_J1 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">ranger =</span> ranger_red, </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">xgb =</span> xgb_red,</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">gbm =</span> gbm_red)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Importance frame (wide format) ===</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>importances_wide <span class="ot">&lt;-</span> <span class="fu">cbind</span>(</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">varImp</span>(ranger_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_ranger =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Imp_ranger"</span> <span class="ot">=</span> <span class="st">"Overall"</span>),</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary.gbm</span>(gbm_red<span class="sc">$</span>finalModel, <span class="at">plotit=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, round, <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_gbm =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(rel.inf)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Imp_gbm"</span> <span class="ot">=</span> <span class="st">"rel.inf"</span>),</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">varImp</span>(xgb_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_gbm =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Imp_gbm"</span> <span class="ot">=</span> <span class="st">"Overall"</span>))  <span class="sc">%&gt;%</span> </span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable</span>()</span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a><span class="do">## Importance frame (long format for plotting) ===</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>importances_long_J1 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">varImp</span>(ranger_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">rownames</span>(.),</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>           <span class="at">model =</span> <span class="st">"ranger"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Importance"</span> <span class="ot">=</span> <span class="st">"Overall"</span>),</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary.gbm</span>(gbm_red<span class="sc">$</span>finalModel, <span class="at">plotit=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, round, <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">rownames</span>(.),</span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>           <span class="at">model =</span> <span class="st">"gbm"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(rel.inf)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Importance"</span> <span class="ot">=</span> <span class="st">"rel.inf"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-42"><a href="#cb17-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(variable, model, Importance)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-43"><a href="#cb17-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="fu">varImp</span>(xgb_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb17-44"><a href="#cb17-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-45"><a href="#cb17-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">rownames</span>(.),</span>
<span id="cb17-46"><a href="#cb17-46" aria-hidden="true" tabindex="-1"></a>           <span class="at">model =</span> <span class="st">"xgb"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-47"><a href="#cb17-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-48"><a href="#cb17-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Importance"</span> <span class="ot">=</span> <span class="st">"Overall"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb17-49"><a href="#cb17-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hypothesis =</span> <span class="fu">case_when</span>(variable <span class="sc">%in%</span> H1_vars <span class="sc">~</span> <span class="st">"H1"</span>,</span>
<span id="cb17-50"><a href="#cb17-50" aria-hidden="true" tabindex="-1"></a>                                variable <span class="sc">%in%</span> H2_vars <span class="sc">~</span> <span class="st">"H2"</span>,</span>
<span id="cb17-51"><a href="#cb17-51" aria-hidden="true" tabindex="-1"></a>                                variable <span class="sc">%in%</span> H3_vars <span class="sc">~</span> <span class="st">"H3"</span>,</span>
<span id="cb17-52"><a href="#cb17-52" aria-hidden="true" tabindex="-1"></a>                                variable <span class="sc">%in%</span> H4_vars <span class="sc">~</span> <span class="st">"H4"</span>,</span>
<span id="cb17-53"><a href="#cb17-53" aria-hidden="true" tabindex="-1"></a>                                <span class="at">.default =</span> <span class="st">"H1"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(Importance, variable, model)`
Joining with `by = join_by(Importance, variable, model)`</code></pre>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Jaccard 2</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>ranger_red <span class="ot">&lt;-</span> saved_models[[<span class="dv">2</span>]][[<span class="dv">1</span>]]</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>xgb_red <span class="ot">&lt;-</span> saved_models[[<span class="dv">2</span>]][[<span class="dv">2</span>]]</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>gbm_red <span class="ot">&lt;-</span> saved_models[[<span class="dv">2</span>]][[<span class="dv">3</span>]]</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Ranger =====</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>ranger_red<span class="sc">$</span>finalModel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Ranger result

Call:
 ranger::ranger(dependent.variable.name = ".outcome", data = x,      mtry = min(param$mtry, ncol(x)), min.node.size = param$min.node.size,      splitrule = as.character(param$splitrule), write.forest = TRUE,      probability = classProbs, ...) 

Type:                             Regression 
Number of trees:                  5000 
Sample size:                      823 
Number of independent variables:  15 
Mtry:                             5 
Target node size:                 5 
Variable importance mode:         permutation 
Splitrule:                        variance 
OOB prediction error (MSE):       0.01544412 
R squared (OOB):                  0.8057051 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>ranger_red<span class="sc">$</span>results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   mtry min.node.size  splitrule      RMSE  Rsquared        MAE      RMSESD
1     2             5   variance 0.1260406 0.8056930 0.08926665 0.007312223
2     2             5 extratrees 0.1289977 0.7973707 0.09216982 0.007723962
3     3             5   variance 0.1249849 0.8078292 0.08748564 0.007485030
4     3             5 extratrees 0.1276692 0.8002262 0.09018152 0.007813283
5     4             5   variance 0.1244352 0.8091078 0.08658932 0.007405179
6     4             5 extratrees 0.1267373 0.8026290 0.08905400 0.007921564
7     5             5   variance 0.1242679 0.8094102 0.08621790 0.007355492
8     5             5 extratrees 0.1263655 0.8034284 0.08842375 0.008066713
9     6             5   variance 0.1243970 0.8088235 0.08615208 0.007526901
10    6             5 extratrees 0.1261296 0.8039488 0.08794364 0.008209857
11    7             5   variance 0.1244752 0.8084954 0.08608531 0.007552705
12    7             5 extratrees 0.1259829 0.8042480 0.08771178 0.008187244
13    8             5   variance 0.1245474 0.8081827 0.08612129 0.007602701
14    8             5 extratrees 0.1257252 0.8049353 0.08736545 0.008345148
15    9             5   variance 0.1247794 0.8074774 0.08621205 0.007444275
16    9             5 extratrees 0.1256311 0.8051973 0.08712087 0.008266322
17   10             5   variance 0.1249122 0.8069866 0.08619433 0.007518964
18   10             5 extratrees 0.1257293 0.8047977 0.08709033 0.008474355
19   11             5   variance 0.1252386 0.8059722 0.08641960 0.007562893
20   11             5 extratrees 0.1256002 0.8051663 0.08693110 0.008463631
21   12             5   variance 0.1254442 0.8052826 0.08648914 0.007540639
22   12             5 extratrees 0.1257058 0.8047797 0.08694106 0.008491981
23   13             5   variance 0.1256391 0.8046830 0.08653946 0.007654048
24   13             5 extratrees 0.1256432 0.8049140 0.08682399 0.008505333
25   14             5   variance 0.1258031 0.8041699 0.08661178 0.007615353
26   14             5 extratrees 0.1257965 0.8043991 0.08681364 0.008568683
27   15             5   variance 0.1260365 0.8034445 0.08676195 0.007622122
28   15             5 extratrees 0.1256931 0.8046933 0.08675762 0.008710886
   RsquaredSD       MAESD
1  0.02540306 0.005493561
2  0.02787693 0.004927717
3  0.02529038 0.005827222
4  0.02756015 0.005006648
5  0.02464231 0.005894750
6  0.02747694 0.005133563
7  0.02420319 0.005914532
8  0.02764641 0.005184050
9  0.02484508 0.006043449
10 0.02793602 0.005311346
11 0.02490062 0.006111946
12 0.02771323 0.005369005
13 0.02500967 0.006134414
14 0.02802708 0.005424229
15 0.02465914 0.005921552
16 0.02763188 0.005383124
17 0.02478801 0.005980159
18 0.02830268 0.005577527
19 0.02516815 0.006006034
20 0.02815352 0.005520004
21 0.02515206 0.005983238
22 0.02825150 0.005613019
23 0.02553690 0.005927629
24 0.02816930 0.005617544
25 0.02530233 0.005946151
26 0.02837556 0.005561156
27 0.02542279 0.005936225
28 0.02881966 0.005665576</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ranger_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="do">## XGB ======</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(xgb_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>xgb_red</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>eXtreme Gradient Boosting 

823 samples
 15 predictor

No pre-processing
Resampling: Cross-Validated (10 fold, repeated 3 times) 
Summary of sample sizes: 660, 660, 660, 660, 660, 660, ... 
Resampling results across tuning parameters:

  eta  max_depth  gamma  RMSE       Rsquared   MAE       
  0.1  2          0.00   0.1284578  0.7979565  0.08993810
  0.1  2          0.01   0.1260796  0.8037433  0.08842593
  0.1  2          0.10   0.1314116  0.7878631  0.09497730
  0.1  3          0.00   0.1284644  0.7981403  0.08934380
  0.1  3          0.01   0.1275459  0.7995220  0.08711394
  0.1  3          0.10   0.1293986  0.7939568  0.09083660
  0.1  5          0.00   0.1266654  0.8025459  0.08635013
  0.1  5          0.01   0.1249692  0.8072804  0.08511744
  0.1  5          0.10   0.1273035  0.8005622  0.08995105
  0.3  2          0.00   0.1338256  0.7829319  0.09464282
  0.3  2          0.01   0.1313921  0.7884705  0.09233459
  0.3  2          0.10   0.1329644  0.7816596  0.09544929
  0.3  3          0.00   0.1304433  0.7926532  0.09167521
  0.3  3          0.01   0.1284496  0.7977904  0.08988310
  0.3  3          0.10   0.1337157  0.7791898  0.09367822
  0.3  5          0.00   0.1329975  0.7845899  0.09044138
  0.3  5          0.01   0.1308238  0.7899613  0.08975483
  0.3  5          0.10   0.1289239  0.7951159  0.09133874

Tuning parameter 'nrounds' was held constant at a value of 1000

Tuning parameter 'min_child_weight' was held constant at a value of 1

Tuning parameter 'subsample' was held constant at a value of 1
RMSE was used to select the optimal model using the smallest value.
The final values used for the model were nrounds = 1000, max_depth = 5, eta
 = 0.1, gamma = 0.01, colsample_bytree = 0.6, min_child_weight = 1
 and subsample = 1.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="do">## GBM =====</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>gbm_red<span class="sc">$</span>finalModel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A gradient boosted model with gaussian loss function.
50 iterations were performed.
There were 15 predictors of which 15 had non-zero influence.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>gbm_red</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Stochastic Gradient Boosting 

823 samples
 15 predictor

No pre-processing
Resampling: Cross-Validated (10 fold, repeated 3 times) 
Summary of sample sizes: 660, 660, 660, 660, 660, 660, ... 
Resampling results across tuning parameters:

  interaction.depth  n.trees  RMSE       Rsquared   MAE       
   1                   50     0.1584074  0.7086926  0.12246133
   1                  100     0.1435215  0.7485171  0.10591372
   1                  150     0.1394734  0.7599662  0.10037732
   1                  200     0.1384146  0.7634577  0.09872444
   1                  250     0.1373744  0.7669744  0.09733579
   1                  300     0.1367024  0.7691750  0.09668674
   1                  350     0.1368078  0.7688117  0.09669316
   1                  400     0.1368899  0.7689408  0.09654413
   1                  450     0.1360716  0.7716790  0.09593482
   1                  500     0.1362813  0.7710574  0.09585209
   1                  550     0.1362871  0.7711316  0.09590389
   1                  600     0.1366642  0.7698342  0.09601912
   1                  650     0.1367353  0.7700177  0.09584530
   1                  700     0.1360659  0.7719509  0.09565328
   1                  750     0.1360073  0.7722783  0.09541158
   1                  800     0.1354786  0.7737655  0.09516774
   1                  850     0.1353131  0.7746747  0.09487182
   1                  900     0.1349485  0.7757720  0.09489295
   1                  950     0.1351550  0.7750624  0.09504177
   1                 1000     0.1351889  0.7751391  0.09462931
   2                   50     0.1412315  0.7560463  0.10319051
   2                  100     0.1341781  0.7778110  0.09424480
   2                  150     0.1331899  0.7811748  0.09280546
   2                  200     0.1320531  0.7850610  0.09153427
   2                  250     0.1305759  0.7900238  0.09056218
   2                  300     0.1309629  0.7888887  0.09059028
   2                  350     0.1311929  0.7881394  0.09090977
   2                  400     0.1305613  0.7900991  0.09058572
   2                  450     0.1306261  0.7897671  0.09075583
   2                  500     0.1307201  0.7898244  0.09079529
   2                  550     0.1308576  0.7894471  0.09094342
   2                  600     0.1306390  0.7900256  0.09097633
   2                  650     0.1301794  0.7914600  0.09081898
   2                  700     0.1298772  0.7926054  0.09062494
   2                  750     0.1302201  0.7916673  0.09084508
   2                  800     0.1301071  0.7920354  0.09101021
   2                  850     0.1299781  0.7925779  0.09074899
   2                  900     0.1302216  0.7918534  0.09112141
   2                  950     0.1299370  0.7927066  0.09111246
   2                 1000     0.1302079  0.7920151  0.09138006
   3                   50     0.1354702  0.7737838  0.09583116
   3                  100     0.1313452  0.7870555  0.09107133
   3                  150     0.1307724  0.7890376  0.09040923
   3                  200     0.1300830  0.7913672  0.09001012
   3                  250     0.1298266  0.7923981  0.09011055
   3                  300     0.1306013  0.7899641  0.09064603
   3                  350     0.1305521  0.7902618  0.09042964
   3                  400     0.1303383  0.7910292  0.09035448
   3                  450     0.1307514  0.7898099  0.09056579
   3                  500     0.1304741  0.7907988  0.09052507
   3                  550     0.1304651  0.7911283  0.09039566
   3                  600     0.1305976  0.7907643  0.09047638
   3                  650     0.1305774  0.7907636  0.09057271
   3                  700     0.1307723  0.7902601  0.09074473
   3                  750     0.1310882  0.7894701  0.09089443
   3                  800     0.1310127  0.7897196  0.09107430
   3                  850     0.1310305  0.7898513  0.09114423
   3                  900     0.1313108  0.7890661  0.09116317
   3                  950     0.1313835  0.7889494  0.09124426
   3                 1000     0.1313361  0.7892466  0.09138830
   4                   50     0.1319902  0.7849885  0.09238716
   4                  100     0.1290531  0.7943175  0.08889128
   4                  150     0.1289522  0.7952563  0.08858471
   4                  200     0.1289310  0.7954851  0.08843235
   4                  250     0.1293091  0.7943071  0.08885981
   4                  300     0.1296344  0.7937031  0.08890821
   4                  350     0.1297294  0.7931637  0.08903844
   4                  400     0.1298753  0.7929470  0.08909999
   4                  450     0.1302956  0.7920786  0.08937468
   4                  500     0.1300753  0.7927773  0.08936576
   4                  550     0.1303154  0.7922350  0.08953787
   4                  600     0.1302035  0.7926392  0.08955912
   4                  650     0.1308081  0.7908603  0.09010048
   4                  700     0.1308628  0.7909072  0.09010682
   4                  750     0.1308826  0.7909193  0.09020055
   4                  800     0.1313222  0.7897089  0.09049264
   4                  850     0.1312623  0.7899755  0.09036911
   4                  900     0.1316414  0.7889157  0.09063450
   4                  950     0.1316719  0.7889149  0.09068012
   4                 1000     0.1318779  0.7883700  0.09085566
   5                   50     0.1312362  0.7868265  0.09155599
   5                  100     0.1297050  0.7924267  0.08958106
   5                  150     0.1288361  0.7950959  0.08947081
   5                  200     0.1290651  0.7948451  0.08901226
   5                  250     0.1298312  0.7928330  0.08967155
   5                  300     0.1292395  0.7948574  0.08958048
   5                  350     0.1294041  0.7945368  0.08987393
   5                  400     0.1296468  0.7938478  0.09031521
   5                  450     0.1298362  0.7934427  0.09042180
   5                  500     0.1296866  0.7940207  0.09026027
   5                  550     0.1301230  0.7928043  0.09031782
   5                  600     0.1302336  0.7926273  0.09063277
   5                  650     0.1303377  0.7924550  0.09052715
   5                  700     0.1306044  0.7917702  0.09075715
   5                  750     0.1307128  0.7915818  0.09074932
   5                  800     0.1310031  0.7907407  0.09095152
   5                  850     0.1311243  0.7905124  0.09106542
   5                  900     0.1311272  0.7904726  0.09105686
   5                  950     0.1311169  0.7906518  0.09101796
   5                 1000     0.1311131  0.7906268  0.09097333
   6                   50     0.1305803  0.7892275  0.09119871
   6                  100     0.1300404  0.7913173  0.08984256
   6                  150     0.1295650  0.7929390  0.08990302
   6                  200     0.1300656  0.7918445  0.09002398
   6                  250     0.1294736  0.7941055  0.08961028
   6                  300     0.1291066  0.7953429  0.08929145
   6                  350     0.1294622  0.7945403  0.08988877
   6                  400     0.1299236  0.7931482  0.09007615
   6                  450     0.1299937  0.7931098  0.09004024
   6                  500     0.1303328  0.7922860  0.09032943
   6                  550     0.1302410  0.7926275  0.09044957
   6                  600     0.1304352  0.7920596  0.09052825
   6                  650     0.1302516  0.7928019  0.09038328
   6                  700     0.1302509  0.7928315  0.09042086
   6                  750     0.1304720  0.7923310  0.09057977
   6                  800     0.1303916  0.7925953  0.09054716
   6                  850     0.1305320  0.7922091  0.09061801
   6                  900     0.1305726  0.7921536  0.09063236
   6                  950     0.1306469  0.7920458  0.09078435
   6                 1000     0.1305765  0.7922752  0.09070045
   7                   50     0.1307579  0.7888864  0.09004225
   7                  100     0.1293564  0.7937211  0.08916414
   7                  150     0.1303358  0.7910600  0.08975257
   7                  200     0.1305526  0.7903710  0.09004413
   7                  250     0.1305003  0.7908379  0.09001871
   7                  300     0.1304427  0.7911130  0.09019726
   7                  350     0.1306958  0.7907275  0.09039593
   7                  400     0.1306112  0.7911365  0.09050001
   7                  450     0.1308759  0.7906046  0.09063660
   7                  500     0.1310556  0.7901675  0.09069579
   7                  550     0.1311143  0.7901550  0.09068275
   7                  600     0.1310974  0.7902719  0.09068295
   7                  650     0.1312212  0.7900023  0.09084907
   7                  700     0.1311993  0.7902051  0.09083951
   7                  750     0.1312898  0.7899968  0.09093972
   7                  800     0.1313557  0.7898352  0.09098680
   7                  850     0.1314379  0.7895758  0.09106189
   7                  900     0.1313992  0.7897153  0.09109252
   7                  950     0.1315073  0.7894371  0.09115280
   7                 1000     0.1314459  0.7896975  0.09110312
   8                   50     0.1290474  0.7943049  0.08918481
   8                  100     0.1288383  0.7958471  0.08789753
   8                  150     0.1290646  0.7950620  0.08838693
   8                  200     0.1294661  0.7939105  0.08840908
   8                  250     0.1298856  0.7928578  0.08871989
   8                  300     0.1298379  0.7930958  0.08866591
   8                  350     0.1302061  0.7922050  0.08896111
   8                  400     0.1301889  0.7924098  0.08903648
   8                  450     0.1301035  0.7926759  0.08906734
   8                  500     0.1302924  0.7922154  0.08923156
   8                  550     0.1305103  0.7916771  0.08932237
   8                  600     0.1304275  0.7919268  0.08930586
   8                  650     0.1305183  0.7916841  0.08930643
   8                  700     0.1305092  0.7917822  0.08932119
   8                  750     0.1307274  0.7911322  0.08954350
   8                  800     0.1307436  0.7911650  0.08958573
   8                  850     0.1307089  0.7912562  0.08954295
   8                  900     0.1306806  0.7913698  0.08952019
   8                  950     0.1307375  0.7912389  0.08954107
   8                 1000     0.1307916  0.7911372  0.08956973
   9                   50     0.1280873  0.7971016  0.08969457
   9                  100     0.1281615  0.7973094  0.08888332
   9                  150     0.1289845  0.7954264  0.08927496
   9                  200     0.1295955  0.7937968  0.08988226
   9                  250     0.1297861  0.7933117  0.09002900
   9                  300     0.1296351  0.7940924  0.09024541
   9                  350     0.1298201  0.7937558  0.09054436
   9                  400     0.1297383  0.7940841  0.09043395
   9                  450     0.1298392  0.7937550  0.09066053
   9                  500     0.1300532  0.7932424  0.09087560
   9                  550     0.1299519  0.7935931  0.09093514
   9                  600     0.1299662  0.7936721  0.09099519
   9                  650     0.1300879  0.7933198  0.09109683
   9                  700     0.1301281  0.7932973  0.09111824
   9                  750     0.1300880  0.7934240  0.09106746
   9                  800     0.1299914  0.7937800  0.09105585
   9                  850     0.1300942  0.7935239  0.09113102
   9                  900     0.1301089  0.7934939  0.09113778
   9                  950     0.1301074  0.7935411  0.09114665
   9                 1000     0.1301709  0.7933976  0.09119489
  10                   50     0.1294101  0.7935070  0.08919532
  10                  100     0.1293842  0.7941388  0.08888102
  10                  150     0.1294039  0.7943717  0.08921797
  10                  200     0.1290413  0.7956726  0.08899274
  10                  250     0.1293973  0.7950923  0.08924317
  10                  300     0.1302726  0.7925906  0.08990092
  10                  350     0.1305757  0.7918577  0.08997181
  10                  400     0.1307520  0.7915413  0.08993049
  10                  450     0.1308591  0.7913457  0.08997757
  10                  500     0.1308761  0.7912503  0.09008533
  10                  550     0.1311018  0.7907374  0.09027126
  10                  600     0.1311056  0.7907181  0.09027360
  10                  650     0.1312674  0.7902953  0.09033327
  10                  700     0.1313612  0.7900840  0.09033570
  10                  750     0.1314093  0.7899434  0.09038508
  10                  800     0.1314101  0.7899732  0.09041920
  10                  850     0.1314461  0.7898900  0.09044895
  10                  900     0.1315016  0.7897552  0.09049643
  10                  950     0.1315404  0.7896625  0.09051017
  10                 1000     0.1315276  0.7897137  0.09050945
  11                   50     0.1298912  0.7912710  0.08873469
  11                  100     0.1289184  0.7950283  0.08835305
  11                  150     0.1300495  0.7919703  0.08929061
  11                  200     0.1303396  0.7913036  0.08963485
  11                  250     0.1298290  0.7932145  0.08961927
  11                  300     0.1298668  0.7930711  0.08961964
  11                  350     0.1300702  0.7927230  0.08989050
  11                  400     0.1300960  0.7929156  0.08999414
  11                  450     0.1300060  0.7932126  0.09001372
  11                  500     0.1301325  0.7929498  0.09020387
  11                  550     0.1302263  0.7926915  0.09024974
  11                  600     0.1302208  0.7927429  0.09027466
  11                  650     0.1302365  0.7927751  0.09023380
  11                  700     0.1302353  0.7927517  0.09024268
  11                  750     0.1301756  0.7930190  0.09019921
  11                  800     0.1301983  0.7929603  0.09020172
  11                  850     0.1301710  0.7930425  0.09019712
  11                  900     0.1301582  0.7930907  0.09021776
  11                  950     0.1301617  0.7930798  0.09022603
  11                 1000     0.1301266  0.7932013  0.09021028
  12                   50     0.1312779  0.7877039  0.08992192
  12                  100     0.1306737  0.7903910  0.08938858
  12                  150     0.1315707  0.7880055  0.09000626
  12                  200     0.1308805  0.7903374  0.08987014
  12                  250     0.1311043  0.7899336  0.09014911
  12                  300     0.1313764  0.7893201  0.09048457
  12                  350     0.1315764  0.7887876  0.09069644
  12                  400     0.1316176  0.7887486  0.09070754
  12                  450     0.1313914  0.7895788  0.09061801
  12                  500     0.1313849  0.7896667  0.09062124
  12                  550     0.1314037  0.7896541  0.09067148
  12                  600     0.1312638  0.7901187  0.09057093
  12                  650     0.1311911  0.7903658  0.09062612
  12                  700     0.1311561  0.7904883  0.09067743
  12                  750     0.1312354  0.7902894  0.09070888
  12                  800     0.1311985  0.7904217  0.09069063
  12                  850     0.1311593  0.7905380  0.09070009
  12                  900     0.1311351  0.7906209  0.09070878
  12                  950     0.1311183  0.7907100  0.09069721
  12                 1000     0.1311325  0.7906813  0.09071575
  13                   50     0.1290159  0.7940237  0.08859232
  13                  100     0.1284857  0.7962826  0.08817150
  13                  150     0.1288077  0.7959142  0.08847121
  13                  200     0.1286499  0.7966336  0.08869121
  13                  250     0.1284464  0.7975734  0.08858228
  13                  300     0.1285547  0.7973087  0.08892125
  13                  350     0.1284592  0.7977466  0.08881224
  13                  400     0.1285081  0.7976546  0.08901085
  13                  450     0.1285311  0.7975825  0.08902213
  13                  500     0.1286994  0.7971841  0.08914167
  13                  550     0.1286856  0.7972548  0.08912285
  13                  600     0.1287239  0.7971719  0.08913940
  13                  650     0.1286591  0.7973717  0.08912730
  13                  700     0.1287349  0.7971281  0.08915678
  13                  750     0.1287791  0.7970337  0.08916986
  13                  800     0.1287876  0.7970090  0.08919717
  13                  850     0.1287659  0.7970721  0.08919024
  13                  900     0.1287309  0.7971844  0.08915607
  13                  950     0.1287015  0.7972794  0.08912467
  13                 1000     0.1287078  0.7972574  0.08914573
  14                   50     0.1311164  0.7880510  0.08937666
  14                  100     0.1298100  0.7928814  0.08877579
  14                  150     0.1302723  0.7918733  0.08957876
  14                  200     0.1297475  0.7938496  0.08958215
  14                  250     0.1301249  0.7924913  0.09002031
  14                  300     0.1302548  0.7922999  0.09033256
  14                  350     0.1301869  0.7925474  0.09039868
  14                  400     0.1304242  0.7919742  0.09050790
  14                  450     0.1303992  0.7921621  0.09053508
  14                  500     0.1304396  0.7920103  0.09053280
  14                  550     0.1303686  0.7922361  0.09055737
  14                  600     0.1303924  0.7921728  0.09055475
  14                  650     0.1302704  0.7925936  0.09050165
  14                  700     0.1302372  0.7927129  0.09046533
  14                  750     0.1301894  0.7928540  0.09046913
  14                  800     0.1302311  0.7927410  0.09049042
  14                  850     0.1302218  0.7927599  0.09049122
  14                  900     0.1301894  0.7928722  0.09046549
  14                  950     0.1301115  0.7931089  0.09042556
  14                 1000     0.1301672  0.7929461  0.09044900
  15                   50     0.1293394  0.7932176  0.08902379
  15                  100     0.1293676  0.7939149  0.08910845
  15                  150     0.1289981  0.7954545  0.08899498
  15                  200     0.1287252  0.7965825  0.08927223
  15                  250     0.1287964  0.7966462  0.08926076
  15                  300     0.1287307  0.7971388  0.08938199
  15                  350     0.1289106  0.7965844  0.08960395
  15                  400     0.1288413  0.7968719  0.08968034
  15                  450     0.1285493  0.7978364  0.08958763
  15                  500     0.1284915  0.7980992  0.08956695
  15                  550     0.1285328  0.7980323  0.08955751
  15                  600     0.1284838  0.7981427  0.08955447
  15                  650     0.1284961  0.7981681  0.08952568
  15                  700     0.1284951  0.7982075  0.08956355
  15                  750     0.1284428  0.7983794  0.08953797
  15                  800     0.1284424  0.7983892  0.08955916
  15                  850     0.1283946  0.7985536  0.08953630
  15                  900     0.1283703  0.7986165  0.08953146
  15                  950     0.1283980  0.7985396  0.08954209
  15                 1000     0.1283362  0.7987338  0.08951513
  16                   50     0.1283689  0.7966960  0.08753356
  16                  100     0.1305577  0.7908714  0.08804681
  16                  150     0.1300207  0.7925528  0.08787229
  16                  200     0.1295665  0.7945949  0.08807212
  16                  250     0.1297753  0.7941035  0.08811500
  16                  300     0.1299268  0.7938731  0.08850874
  16                  350     0.1301912  0.7931743  0.08884685
  16                  400     0.1301226  0.7934396  0.08878903
  16                  450     0.1300845  0.7936367  0.08878791
  16                  500     0.1301251  0.7935943  0.08876769
  16                  550     0.1301321  0.7935444  0.08884653
  16                  600     0.1300905  0.7937549  0.08884831
  16                  650     0.1300608  0.7938861  0.08883626
  16                  700     0.1299751  0.7941605  0.08882584
  16                  750     0.1299608  0.7942125  0.08882290
  16                  800     0.1299421  0.7942970  0.08881900
  16                  850     0.1298566  0.7945542  0.08879357
  16                  900     0.1298904  0.7944596  0.08879694
  16                  950     0.1298423  0.7946215  0.08877699
  16                 1000     0.1298347  0.7946693  0.08876285
  17                   50     0.1299001  0.7920579  0.08804108
  17                  100     0.1303908  0.7914290  0.08871953
  17                  150     0.1302473  0.7922894  0.08876135
  17                  200     0.1310583  0.7903206  0.08943456
  17                  250     0.1317316  0.7883230  0.08964818
  17                  300     0.1318872  0.7880527  0.08978061
  17                  350     0.1321416  0.7874030  0.08994031
  17                  400     0.1318971  0.7881878  0.08989739
  17                  450     0.1317146  0.7887874  0.08982716
  17                  500     0.1318036  0.7885520  0.08986517
  17                  550     0.1316090  0.7891810  0.08983734
  17                  600     0.1315521  0.7893552  0.08986816
  17                  650     0.1314947  0.7895565  0.08982508
  17                  700     0.1313526  0.7899884  0.08977059
  17                  750     0.1313675  0.7899868  0.08975431
  17                  800     0.1312992  0.7901946  0.08972015
  17                  850     0.1312571  0.7903161  0.08970528
  17                  900     0.1312500  0.7903422  0.08968051
  17                  950     0.1312753  0.7902607  0.08967387
  17                 1000     0.1312726  0.7902832  0.08969394
  18                   50     0.1288523  0.7950338  0.08779494
  18                  100     0.1293887  0.7942816  0.08819209
  18                  150     0.1294105  0.7946735  0.08836900
  18                  200     0.1291991  0.7955358  0.08860491
  18                  250     0.1296125  0.7943926  0.08895640
  18                  300     0.1299678  0.7934253  0.08917967
  18                  350     0.1297991  0.7941214  0.08927997
  18                  400     0.1299479  0.7937556  0.08940463
  18                  450     0.1300402  0.7935270  0.08949518
  18                  500     0.1299248  0.7938850  0.08947491
  18                  550     0.1299464  0.7938901  0.08949894
  18                  600     0.1299581  0.7938742  0.08955784
  18                  650     0.1298389  0.7942222  0.08952583
  18                  700     0.1298570  0.7942070  0.08950299
  18                  750     0.1298009  0.7944071  0.08948176
  18                  800     0.1298550  0.7942394  0.08952284
  18                  850     0.1298549  0.7942623  0.08952792
  18                  900     0.1298579  0.7942758  0.08952034
  18                  950     0.1297876  0.7944822  0.08949148
  18                 1000     0.1298257  0.7943640  0.08951648
  19                   50     0.1291501  0.7935604  0.08843129
  19                  100     0.1291973  0.7945503  0.08838429
  19                  150     0.1296598  0.7932487  0.08895094
  19                  200     0.1298871  0.7929046  0.08926857
  19                  250     0.1298335  0.7932069  0.08936154
  19                  300     0.1300422  0.7925868  0.08949688
  19                  350     0.1296960  0.7938090  0.08953113
  19                  400     0.1295477  0.7942420  0.08952061
  19                  450     0.1295322  0.7943277  0.08954136
  19                  500     0.1295516  0.7943049  0.08963444
  19                  550     0.1295864  0.7942245  0.08966258
  19                  600     0.1294248  0.7947457  0.08957554
  19                  650     0.1293530  0.7949840  0.08956101
  19                  700     0.1292330  0.7953503  0.08951184
  19                  750     0.1292615  0.7952788  0.08949811
  19                  800     0.1292182  0.7954010  0.08945505
  19                  850     0.1291611  0.7955963  0.08944151
  19                  900     0.1291467  0.7956260  0.08942938
  19                  950     0.1291718  0.7955394  0.08944470
  19                 1000     0.1291472  0.7956384  0.08941426
  20                   50     0.1288098  0.7947898  0.08878282
  20                  100     0.1288240  0.7955616  0.08882946
  20                  150     0.1290725  0.7952653  0.08891402
  20                  200     0.1295040  0.7940545  0.08921330
  20                  250     0.1293822  0.7946422  0.08918458
  20                  300     0.1294966  0.7943708  0.08922025
  20                  350     0.1298036  0.7934646  0.08950123
  20                  400     0.1294723  0.7945474  0.08947917
  20                  450     0.1294167  0.7948002  0.08953956
  20                  500     0.1292847  0.7952329  0.08949908
  20                  550     0.1291894  0.7955359  0.08950960
  20                  600     0.1291469  0.7956658  0.08952481
  20                  650     0.1290690  0.7959300  0.08950182
  20                  700     0.1290244  0.7960974  0.08950991
  20                  750     0.1291098  0.7958526  0.08953859
  20                  800     0.1290576  0.7960356  0.08951678
  20                  850     0.1290655  0.7959940  0.08955958
  20                  900     0.1290418  0.7960687  0.08955726
  20                  950     0.1290526  0.7960397  0.08956962
  20                 1000     0.1290149  0.7961653  0.08955349

Tuning parameter 'shrinkage' was held constant at a value of 0.1

Tuning parameter 'n.minobsinnode' was held constant at a value of 10
RMSE was used to select the optimal model using the smallest value.
The final values used for the model were n.trees = 50, interaction.depth =
 9, shrinkage = 0.1 and n.minobsinnode = 10.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>models_J2 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">ranger =</span> ranger_red, </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">xgb =</span> xgb_red,</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">gbm =</span> gbm_red)</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Importance frame (wide format) ===</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>importances_wide <span class="ot">&lt;-</span> <span class="fu">cbind</span>(</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">varImp</span>(ranger_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_ranger =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Imp_ranger"</span> <span class="ot">=</span> <span class="st">"Overall"</span>),</span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary.gbm</span>(gbm_red<span class="sc">$</span>finalModel, <span class="at">plotit=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, round, <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_gbm =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(rel.inf)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Imp_gbm"</span> <span class="ot">=</span> <span class="st">"rel.inf"</span>),</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">varImp</span>(xgb_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_gbm =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Imp_gbm"</span> <span class="ot">=</span> <span class="st">"Overall"</span>))  <span class="sc">%&gt;%</span> </span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable</span>()</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a><span class="do">## Importance frame (long format for plotting) ===</span></span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a>importances_long_J2 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(</span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">varImp</span>(ranger_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">rownames</span>(.),</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a>           <span class="at">model =</span> <span class="st">"ranger"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Importance"</span> <span class="ot">=</span> <span class="st">"Overall"</span>),</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary.gbm</span>(gbm_red<span class="sc">$</span>finalModel, <span class="at">plotit=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, round, <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">rownames</span>(.),</span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a>           <span class="at">model =</span> <span class="st">"gbm"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(rel.inf)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Importance"</span> <span class="ot">=</span> <span class="st">"rel.inf"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(variable, model, Importance)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="fu">varImp</span>(xgb_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">rownames</span>(.),</span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a>           <span class="at">model =</span> <span class="st">"xgb"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Importance"</span> <span class="ot">=</span> <span class="st">"Overall"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb31-55"><a href="#cb31-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hypothesis =</span> <span class="fu">case_when</span>(variable <span class="sc">%in%</span> H1_vars <span class="sc">~</span> <span class="st">"H1"</span>,</span>
<span id="cb31-56"><a href="#cb31-56" aria-hidden="true" tabindex="-1"></a>                                variable <span class="sc">%in%</span> H2_vars <span class="sc">~</span> <span class="st">"H2"</span>,</span>
<span id="cb31-57"><a href="#cb31-57" aria-hidden="true" tabindex="-1"></a>                                variable <span class="sc">%in%</span> H3_vars <span class="sc">~</span> <span class="st">"H3"</span>,</span>
<span id="cb31-58"><a href="#cb31-58" aria-hidden="true" tabindex="-1"></a>                                variable <span class="sc">%in%</span> H4_vars <span class="sc">~</span> <span class="st">"H4"</span>,</span>
<span id="cb31-59"><a href="#cb31-59" aria-hidden="true" tabindex="-1"></a>                                <span class="at">.default =</span> <span class="st">"H1"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(Importance, variable, model)`
Joining with `by = join_by(Importance, variable, model)`</code></pre>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="do">## reduced:</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>ranger_red <span class="ot">&lt;-</span> saved_models[[<span class="dv">3</span>]][[<span class="dv">1</span>]]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>xgb_red <span class="ot">&lt;-</span> saved_models[[<span class="dv">3</span>]][[<span class="dv">2</span>]]</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>gbm_red <span class="ot">&lt;-</span> saved_models[[<span class="dv">3</span>]][[<span class="dv">3</span>]]</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Ranger =====</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>ranger_red<span class="sc">$</span>finalModel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Ranger result

Call:
 ranger::ranger(dependent.variable.name = ".outcome", data = x,      mtry = min(param$mtry, ncol(x)), min.node.size = param$min.node.size,      splitrule = as.character(param$splitrule), write.forest = TRUE,      probability = classProbs, ...) 

Type:                             Regression 
Number of trees:                  5000 
Sample size:                      826 
Number of independent variables:  65 
Mtry:                             28 
Target node size:                 5 
Variable importance mode:         permutation 
Splitrule:                        extratrees 
Number of random splits:          1 
OOB prediction error (MSE):       0.2534179 
R squared (OOB):                  0.2028804 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>ranger_red<span class="sc">$</span>results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   mtry min.node.size  splitrule      RMSE  Rsquared       MAE     RMSESD
1     2             5   variance 0.5320747 0.1600207 0.3170141 0.07035462
2     2             5 extratrees 0.5402015 0.1490651 0.3229499 0.07203334
3     5             5   variance 0.5313187 0.1566525 0.3149512 0.06979858
4     5             5 extratrees 0.5283157 0.1691224 0.3144486 0.07256819
5     8             5   variance 0.5329553 0.1520773 0.3164223 0.06968052
6     8             5 extratrees 0.5250628 0.1765168 0.3127621 0.07155879
7    11             5   variance 0.5339281 0.1501889 0.3171846 0.07116278
8    11             5 extratrees 0.5234105 0.1809372 0.3121375 0.07059536
9    15             5   variance 0.5347444 0.1490098 0.3184222 0.07112692
10   15             5 extratrees 0.5219943 0.1847293 0.3114732 0.06978990
11   18             5   variance 0.5356479 0.1467067 0.3192681 0.07070322
12   18             5 extratrees 0.5210211 0.1886790 0.3116950 0.06955238
13   21             5   variance 0.5359480 0.1462804 0.3198207 0.07120191
14   21             5 extratrees 0.5206855 0.1892880 0.3114805 0.06957676
15   25             5   variance 0.5372980 0.1430518 0.3210183 0.07213182
16   25             5 extratrees 0.5207829 0.1891704 0.3115545 0.06936890
17   28             5   variance 0.5374314 0.1431692 0.3215648 0.07229645
18   28             5 extratrees 0.5203579 0.1905113 0.3116032 0.06878515
19   31             5   variance 0.5377223 0.1430242 0.3222687 0.07247417
20   31             5 extratrees 0.5205012 0.1901582 0.3118028 0.06845785
21   35             5   variance 0.5383492 0.1419107 0.3230841 0.07346656
22   35             5 extratrees 0.5205606 0.1898853 0.3120008 0.06806734
23   38             5   variance 0.5389178 0.1396532 0.3233412 0.07306683
24   38             5 extratrees 0.5210864 0.1880556 0.3125096 0.06842888
25   41             5   variance 0.5392749 0.1398874 0.3240600 0.07367190
26   41             5 extratrees 0.5212167 0.1874728 0.3123936 0.06772508
27   45             5   variance 0.5398524 0.1389578 0.3247134 0.07422217
28   45             5 extratrees 0.5211841 0.1881407 0.3125285 0.06812320
29   48             5   variance 0.5401299 0.1386446 0.3249213 0.07418648
30   48             5 extratrees 0.5216228 0.1866076 0.3130290 0.06762264
31   51             5   variance 0.5403064 0.1384746 0.3251314 0.07463733
32   51             5 extratrees 0.5217024 0.1864329 0.3133378 0.06797208
33   55             5   variance 0.5405742 0.1380994 0.3258049 0.07458579
34   55             5 extratrees 0.5216594 0.1865792 0.3131444 0.06794926
35   58             5   variance 0.5409279 0.1375885 0.3262961 0.07486114
36   58             5 extratrees 0.5222240 0.1852020 0.3138892 0.06753329
37   61             5   variance 0.5413735 0.1365139 0.3266171 0.07533145
38   61             5 extratrees 0.5225788 0.1838167 0.3137455 0.06771464
39   65             5   variance 0.5416691 0.1362006 0.3270010 0.07544421
40   65             5 extratrees 0.5225338 0.1841976 0.3139425 0.06753457
   RsquaredSD      MAESD
1  0.08090549 0.03564697
2  0.06543634 0.03343963
3  0.07378990 0.03636950
4  0.07240260 0.03330323
5  0.07090402 0.03675435
6  0.07292773 0.03345122
7  0.07393080 0.03752717
8  0.07443596 0.03303714
9  0.07457408 0.03763041
10 0.07523777 0.03349860
11 0.07239201 0.03738859
12 0.07703531 0.03353334
13 0.07342991 0.03756284
14 0.07928663 0.03366847
15 0.07340964 0.03807907
16 0.08042089 0.03383967
17 0.07265267 0.03811247
18 0.07908738 0.03368864
19 0.07287818 0.03831340
20 0.07982387 0.03372108
21 0.07360244 0.03866009
22 0.07924003 0.03378310
23 0.07100787 0.03854148
24 0.07838398 0.03415703
25 0.07316551 0.03885919
26 0.07637090 0.03364518
27 0.07425041 0.03901070
28 0.07881821 0.03431316
29 0.07416434 0.03912824
30 0.07663446 0.03412192
31 0.07487497 0.03908243
32 0.07788429 0.03418646
33 0.07442515 0.03921508
34 0.07798208 0.03426959
35 0.07538911 0.03903597
36 0.07797287 0.03445604
37 0.07476799 0.03924676
38 0.07755816 0.03420463
39 0.07503576 0.03953798
40 0.07726157 0.03428784</code></pre>
</div>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ranger_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="do">## XGB ======</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(xgb_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>xgb_red</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>eXtreme Gradient Boosting 

826 samples
 38 predictor

No pre-processing
Resampling: Cross-Validated (10 fold, repeated 3 times) 
Summary of sample sizes: 662, 662, 662, 662, 662, 662, ... 
Resampling results across tuning parameters:

  eta  max_depth  gamma  RMSE       Rsquared   MAE      
  0.1  2          0.00   0.5678779  0.1285944  0.3656795
  0.1  2          0.01   0.5658114  0.1306091  0.3666543
  0.1  2          0.10   0.5538973  0.1352698  0.3515384
  0.1  3          0.00   0.5548438  0.1402920  0.3518576
  0.1  3          0.01   0.5498611  0.1464288  0.3476347
  0.1  3          0.10   0.5482858  0.1432473  0.3439321
  0.1  5          0.00   0.5475174  0.1417823  0.3412254
  0.1  5          0.01   0.5439006  0.1467551  0.3394792
  0.1  5          0.10   0.5424288  0.1538734  0.3368182
  0.3  2          0.00   0.5766738  0.1253950  0.3727036
  0.3  2          0.01   0.5768103  0.1147682  0.3737651
  0.3  2          0.10   0.5698549  0.1253031  0.3651133
  0.3  3          0.00   0.5761356  0.1091040  0.3630615
  0.3  3          0.01   0.5548719  0.1547236  0.3578578
  0.3  3          0.10   0.5628699  0.1278281  0.3594727
  0.3  5          0.00   0.5653773  0.1197111  0.3521747
  0.3  5          0.01   0.5607586  0.1271971  0.3487048
  0.3  5          0.10   0.5473352  0.1467605  0.3417180

Tuning parameter 'nrounds' was held constant at a value of 1000

Tuning parameter 'min_child_weight' was held constant at a value of 1

Tuning parameter 'subsample' was held constant at a value of 1
RMSE was used to select the optimal model using the smallest value.
The final values used for the model were nrounds = 1000, max_depth = 5, eta
 = 0.1, gamma = 0.1, colsample_bytree = 0.6, min_child_weight = 1 and
 subsample = 1.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="do">## GBM =====</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>gbm_red<span class="sc">$</span>finalModel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A gradient boosted model with gaussian loss function.
50 iterations were performed.
There were 65 predictors of which 31 had non-zero influence.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>gbm_red</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Stochastic Gradient Boosting 

826 samples
 38 predictor

No pre-processing
Resampling: Cross-Validated (10 fold, repeated 3 times) 
Summary of sample sizes: 662, 662, 662, 662, 662, 662, ... 
Resampling results across tuning parameters:

  interaction.depth  n.trees  RMSE       Rsquared    MAE      
   1                   50     0.5453209  0.11276686  0.3330431
   1                  100     0.5411494  0.13314990  0.3350526
   1                  150     0.5427483  0.13222468  0.3396717
   1                  200     0.5464531  0.12960125  0.3434847
   1                  250     0.5481550  0.12903630  0.3465817
   1                  300     0.5497724  0.12826980  0.3500051
   1                  350     0.5494769  0.12887435  0.3515606
   1                  400     0.5563459  0.12222251  0.3570403
   1                  450     0.5567504  0.12061410  0.3585423
   1                  500     0.5617986  0.11553853  0.3624929
   1                  550     0.5637808  0.11299472  0.3635665
   1                  600     0.5670194  0.10916300  0.3651230
   1                  650     0.5683427  0.10716338  0.3657090
   1                  700     0.5708814  0.10468160  0.3683994
   1                  750     0.5723362  0.10377459  0.3691504
   1                  800     0.5743099  0.10137179  0.3707726
   1                  850     0.5763730  0.09855171  0.3720541
   1                  900     0.5776585  0.10028188  0.3736275
   1                  950     0.5789854  0.09811917  0.3747662
   1                 1000     0.5802115  0.10014314  0.3765578
   2                   50     0.5440630  0.12426624  0.3290501
   2                  100     0.5499272  0.12212763  0.3388875
   2                  150     0.5565498  0.11706322  0.3456571
   2                  200     0.5641916  0.10996731  0.3523291
   2                  250     0.5674625  0.10787902  0.3561385
   2                  300     0.5726960  0.10603867  0.3594207
   2                  350     0.5753277  0.10750726  0.3619415
   2                  400     0.5776105  0.10460018  0.3646806
   2                  450     0.5795096  0.10528946  0.3650658
   2                  500     0.5819660  0.10405460  0.3669300
   2                  550     0.5844087  0.10107821  0.3694271
   2                  600     0.5879210  0.09875226  0.3714303
   2                  650     0.5889186  0.09853639  0.3725080
   2                  700     0.5915793  0.09583180  0.3742596
   2                  750     0.5921395  0.09794384  0.3751922
   2                  800     0.5939875  0.09595940  0.3764275
   2                  850     0.5952447  0.09487132  0.3771570
   2                  900     0.5944024  0.09674908  0.3770566
   2                  950     0.5956077  0.09658741  0.3782954
   2                 1000     0.5969042  0.09511108  0.3788724
   3                   50     0.5410392  0.13588204  0.3289230
   3                  100     0.5533776  0.12680546  0.3414003
   3                  150     0.5638061  0.11740749  0.3527015
   3                  200     0.5709343  0.10801164  0.3575787
   3                  250     0.5735119  0.10786719  0.3602379
   3                  300     0.5764019  0.11053800  0.3617477
   3                  350     0.5772037  0.11302853  0.3612185
   3                  400     0.5818488  0.10710322  0.3635196
   3                  450     0.5815981  0.10923716  0.3638935
   3                  500     0.5837401  0.10798408  0.3659239
   3                  550     0.5851383  0.10917401  0.3672633
   3                  600     0.5857292  0.10810662  0.3678001
   3                  650     0.5872661  0.10734404  0.3692470
   3                  700     0.5880378  0.10739893  0.3703138
   3                  750     0.5885932  0.10747738  0.3707743
   3                  800     0.5900401  0.10586809  0.3714613
   3                  850     0.5905495  0.10561139  0.3718648
   3                  900     0.5914810  0.10505618  0.3726712
   3                  950     0.5921080  0.10457601  0.3732081
   3                 1000     0.5928487  0.10455697  0.3741254
   4                   50     0.5444219  0.13027568  0.3331173
   4                  100     0.5576479  0.12247768  0.3452013
   4                  150     0.5696806  0.10827659  0.3540370
   4                  200     0.5743478  0.10693725  0.3571289
   4                  250     0.5804285  0.10262226  0.3612115
   4                  300     0.5851436  0.09928730  0.3658404
   4                  350     0.5884409  0.09703926  0.3680604
   4                  400     0.5892196  0.09815016  0.3687581
   4                  450     0.5905166  0.09689026  0.3700734
   4                  500     0.5921847  0.09602372  0.3717528
   4                  550     0.5943531  0.09485277  0.3741240
   4                  600     0.5946995  0.09406454  0.3748678
   4                  650     0.5961893  0.09352154  0.3760616
   4                  700     0.5970976  0.09274192  0.3767004
   4                  750     0.5979700  0.09206338  0.3777760
   4                  800     0.5986542  0.09155883  0.3779312
   4                  850     0.5991979  0.09109155  0.3781263
   4                  900     0.6000346  0.09034042  0.3789374
   4                  950     0.6001051  0.09052130  0.3791347
   4                 1000     0.6005364  0.09005158  0.3794271
   5                   50     0.5443950  0.13118248  0.3328844
   5                  100     0.5622369  0.10984850  0.3469523
   5                  150     0.5717406  0.10324053  0.3542386
   5                  200     0.5771477  0.09992301  0.3581685
   5                  250     0.5808652  0.10021719  0.3619747
   5                  300     0.5820350  0.10060560  0.3642813
   5                  350     0.5850374  0.10042490  0.3661130
   5                  400     0.5870263  0.09888269  0.3677625
   5                  450     0.5884556  0.09943217  0.3691780
   5                  500     0.5905174  0.09695466  0.3707680
   5                  550     0.5909464  0.09736413  0.3718966
   5                  600     0.5921720  0.09599165  0.3729199
   5                  650     0.5922132  0.09634844  0.3732672
   5                  700     0.5924012  0.09634830  0.3737686
   5                  750     0.5929264  0.09601922  0.3741128
   5                  800     0.5934031  0.09548468  0.3743741
   5                  850     0.5935378  0.09535237  0.3745566
   5                  900     0.5935863  0.09549574  0.3747803
   5                  950     0.5940690  0.09509605  0.3749366
   5                 1000     0.5941774  0.09503007  0.3752002
   6                   50     0.5463812  0.13075363  0.3356204
   6                  100     0.5635853  0.11427642  0.3489985
   6                  150     0.5676499  0.11606195  0.3544246
   6                  200     0.5752242  0.10982679  0.3585567
   6                  250     0.5749509  0.11177638  0.3597475
   6                  300     0.5773803  0.11098790  0.3619288
   6                  350     0.5790786  0.10906313  0.3635821
   6                  400     0.5808699  0.10811569  0.3653593
   6                  450     0.5814797  0.10822440  0.3659935
   6                  500     0.5824142  0.10765385  0.3661235
   6                  550     0.5832740  0.10643209  0.3670268
   6                  600     0.5836597  0.10588553  0.3676875
   6                  650     0.5841380  0.10564793  0.3678690
   6                  700     0.5849629  0.10456947  0.3687008
   6                  750     0.5852889  0.10442105  0.3692048
   6                  800     0.5852480  0.10467103  0.3691186
   6                  850     0.5853728  0.10461166  0.3693694
   6                  900     0.5855389  0.10447792  0.3695638
   6                  950     0.5857330  0.10430570  0.3696827
   6                 1000     0.5858491  0.10426293  0.3697533
   7                   50     0.5478909  0.12609556  0.3337780
   7                  100     0.5595918  0.12107848  0.3484217
   7                  150     0.5670040  0.11610722  0.3546119
   7                  200     0.5710763  0.11356550  0.3584137
   7                  250     0.5738548  0.11102720  0.3603681
   7                  300     0.5754928  0.11068284  0.3618532
   7                  350     0.5776298  0.10894878  0.3629420
   7                  400     0.5784484  0.10831222  0.3635879
   7                  450     0.5795603  0.10729956  0.3644478
   7                  500     0.5807213  0.10625747  0.3646954
   7                  550     0.5811771  0.10591867  0.3647988
   7                  600     0.5814677  0.10574170  0.3652090
   7                  650     0.5818583  0.10537949  0.3652956
   7                  700     0.5820734  0.10530370  0.3656986
   7                  750     0.5825560  0.10473030  0.3660817
   7                  800     0.5825511  0.10483975  0.3660106
   7                  850     0.5827906  0.10454118  0.3662170
   7                  900     0.5828693  0.10441064  0.3663414
   7                  950     0.5829886  0.10431509  0.3664187
   7                 1000     0.5830266  0.10430467  0.3664293
   8                   50     0.5523564  0.12586920  0.3411786
   8                  100     0.5690197  0.11122994  0.3559012
   8                  150     0.5779470  0.10538885  0.3632349
   8                  200     0.5813751  0.10255625  0.3657659
   8                  250     0.5846984  0.10043011  0.3677826
   8                  300     0.5861157  0.09972193  0.3690053
   8                  350     0.5883513  0.09702352  0.3710379
   8                  400     0.5895595  0.09649964  0.3719499
   8                  450     0.5907514  0.09583195  0.3725195
   8                  500     0.5917408  0.09487975  0.3731959
   8                  550     0.5919380  0.09444271  0.3733007
   8                  600     0.5924805  0.09376117  0.3734105
   8                  650     0.5925623  0.09389444  0.3735469
   8                  700     0.5930666  0.09347747  0.3740045
   8                  750     0.5932415  0.09320250  0.3740608
   8                  800     0.5935403  0.09281725  0.3742281
   8                  850     0.5936825  0.09274038  0.3743080
   8                  900     0.5937853  0.09281246  0.3743816
   8                  950     0.5938222  0.09270083  0.3743452
   8                 1000     0.5939396  0.09253259  0.3744127
   9                   50     0.5563687  0.11530772  0.3422639
   9                  100     0.5692173  0.10327635  0.3519663
   9                  150     0.5779961  0.09934933  0.3601293
   9                  200     0.5828063  0.09421369  0.3646538
   9                  250     0.5873796  0.09061348  0.3676249
   9                  300     0.5909195  0.08655142  0.3697890
   9                  350     0.5926151  0.08469021  0.3711098
   9                  400     0.5935386  0.08352374  0.3722860
   9                  450     0.5947803  0.08216616  0.3732742
   9                  500     0.5949191  0.08203437  0.3735599
   9                  550     0.5951215  0.08193482  0.3737775
   9                  600     0.5957051  0.08138625  0.3741841
   9                  650     0.5961081  0.08112482  0.3744294
   9                  700     0.5962783  0.08110244  0.3745588
   9                  750     0.5964757  0.08077213  0.3748366
   9                  800     0.5965272  0.08087575  0.3748803
   9                  850     0.5966257  0.08081866  0.3749956
   9                  900     0.5968004  0.08067883  0.3751649
   9                  950     0.5968574  0.08058286  0.3752239
   9                 1000     0.5969473  0.08052850  0.3752979
  10                   50     0.5585276  0.11475001  0.3432607
  10                  100     0.5739204  0.10760476  0.3561855
  10                  150     0.5808675  0.10294254  0.3606709
  10                  200     0.5851172  0.09827250  0.3645676
  10                  250     0.5876309  0.09793282  0.3658774
  10                  300     0.5895311  0.09560984  0.3670094
  10                  350     0.5915264  0.09464707  0.3686008
  10                  400     0.5923614  0.09398358  0.3692125
  10                  450     0.5934603  0.09287847  0.3698782
  10                  500     0.5939678  0.09244280  0.3702435
  10                  550     0.5945292  0.09175479  0.3707086
  10                  600     0.5948583  0.09187014  0.3710613
  10                  650     0.5950586  0.09168525  0.3710830
  10                  700     0.5951853  0.09144702  0.3711415
  10                  750     0.5954792  0.09110628  0.3712865
  10                  800     0.5956088  0.09097161  0.3713197
  10                  850     0.5957780  0.09071000  0.3713616
  10                  900     0.5960723  0.09049473  0.3715091
  10                  950     0.5961418  0.09035351  0.3715490
  10                 1000     0.5962568  0.09025067  0.3716236
  11                   50     0.5639931  0.10680744  0.3459628
  11                  100     0.5772753  0.09402876  0.3542837
  11                  150     0.5841737  0.09101564  0.3605798
  11                  200     0.5919958  0.08413469  0.3660693
  11                  250     0.5949281  0.08155938  0.3684235
  11                  300     0.5969892  0.07992388  0.3703856
  11                  350     0.5991508  0.07831475  0.3721080
  11                  400     0.5991172  0.07903944  0.3719415
  11                  450     0.6000440  0.07798655  0.3723846
  11                  500     0.6006022  0.07756201  0.3725514
  11                  550     0.6009102  0.07719116  0.3727869
  11                  600     0.6013365  0.07657459  0.3731125
  11                  650     0.6014612  0.07635450  0.3731959
  11                  700     0.6019771  0.07596137  0.3734776
  11                  750     0.6022825  0.07568023  0.3735249
  11                  800     0.6024224  0.07538872  0.3735851
  11                  850     0.6026717  0.07505094  0.3736911
  11                  900     0.6029406  0.07486509  0.3737900
  11                  950     0.6031083  0.07477807  0.3738129
  11                 1000     0.6032737  0.07451094  0.3738814
  12                   50     0.5583360  0.12073746  0.3421563
  12                  100     0.5745297  0.10755002  0.3563421
  12                  150     0.5845424  0.10090200  0.3631475
  12                  200     0.5906087  0.09478600  0.3672328
  12                  250     0.5928565  0.09500117  0.3690731
  12                  300     0.5948135  0.09253340  0.3700709
  12                  350     0.5963781  0.09170245  0.3710345
  12                  400     0.5975501  0.09062917  0.3716502
  12                  450     0.5983625  0.09008512  0.3721548
  12                  500     0.5989921  0.08961780  0.3725404
  12                  550     0.5988918  0.08949913  0.3725463
  12                  600     0.5992446  0.08921890  0.3726716
  12                  650     0.5996385  0.08896780  0.3728582
  12                  700     0.6001016  0.08852763  0.3730779
  12                  750     0.6000472  0.08877987  0.3729958
  12                  800     0.6003254  0.08848207  0.3731727
  12                  850     0.6005529  0.08831577  0.3732504
  12                  900     0.6006412  0.08829242  0.3733424
  12                  950     0.6009422  0.08784738  0.3734805
  12                 1000     0.6010598  0.08773740  0.3735000
  13                   50     0.5551587  0.12016745  0.3423942
  13                  100     0.5707515  0.11244470  0.3559943
  13                  150     0.5785372  0.10390353  0.3624828
  13                  200     0.5811777  0.10303882  0.3653982
  13                  250     0.5840305  0.09926156  0.3664499
  13                  300     0.5854905  0.09824418  0.3677243
  13                  350     0.5880952  0.09571832  0.3692982
  13                  400     0.5894755  0.09398528  0.3701120
  13                  450     0.5897342  0.09435716  0.3707219
  13                  500     0.5908199  0.09285631  0.3712537
  13                  550     0.5915571  0.09221136  0.3715800
  13                  600     0.5918141  0.09211228  0.3718835
  13                  650     0.5924270  0.09122910  0.3722037
  13                  700     0.5927368  0.09103374  0.3723603
  13                  750     0.5930038  0.09069762  0.3725468
  13                  800     0.5933188  0.09010738  0.3726363
  13                  850     0.5934733  0.08995927  0.3727239
  13                  900     0.5936346  0.08977685  0.3728276
  13                  950     0.5938233  0.08949740  0.3728881
  13                 1000     0.5938868  0.08949223  0.3729242
  14                   50     0.5548040  0.11770271  0.3413240
  14                  100     0.5673774  0.11344807  0.3538676
  14                  150     0.5768105  0.10397719  0.3601051
  14                  200     0.5829904  0.09848051  0.3638240
  14                  250     0.5864827  0.09681275  0.3664618
  14                  300     0.5890569  0.09307091  0.3679592
  14                  350     0.5901545  0.09170456  0.3684894
  14                  400     0.5919491  0.09040603  0.3695066
  14                  450     0.5937192  0.08844721  0.3703378
  14                  500     0.5946707  0.08735185  0.3709686
  14                  550     0.5952045  0.08670526  0.3711476
  14                  600     0.5961833  0.08590756  0.3718125
  14                  650     0.5964806  0.08561896  0.3719604
  14                  700     0.5968289  0.08510170  0.3720568
  14                  750     0.5970696  0.08508368  0.3722736
  14                  800     0.5975294  0.08447190  0.3724847
  14                  850     0.5979976  0.08428179  0.3727531
  14                  900     0.5980134  0.08409285  0.3727326
  14                  950     0.5981583  0.08394068  0.3728827
  14                 1000     0.5983978  0.08368324  0.3730040
  15                   50     0.5528125  0.12820457  0.3400189
  15                  100     0.5685021  0.12037565  0.3522105
  15                  150     0.5757411  0.11378866  0.3585352
  15                  200     0.5804401  0.10979712  0.3628368
  15                  250     0.5835773  0.10721830  0.3650292
  15                  300     0.5852602  0.10531309  0.3658620
  15                  350     0.5872909  0.10313677  0.3668085
  15                  400     0.5879709  0.10226976  0.3675585
  15                  450     0.5891570  0.10100887  0.3682194
  15                  500     0.5903144  0.10000720  0.3686548
  15                  550     0.5908475  0.09963579  0.3688267
  15                  600     0.5910235  0.09924186  0.3688363
  15                  650     0.5915252  0.09861472  0.3691664
  15                  700     0.5921822  0.09795344  0.3694418
  15                  750     0.5924998  0.09765016  0.3696287
  15                  800     0.5926619  0.09752606  0.3697795
  15                  850     0.5930280  0.09687002  0.3699757
  15                  900     0.5933279  0.09680841  0.3700959
  15                  950     0.5934832  0.09636745  0.3702184
  15                 1000     0.5935980  0.09627017  0.3703229
  16                   50     0.5550912  0.12315054  0.3421371
  16                  100     0.5683244  0.11382871  0.3536149
  16                  150     0.5778940  0.10741484  0.3599092
  16                  200     0.5823046  0.10361431  0.3623247
  16                  250     0.5855040  0.10094928  0.3646521
  16                  300     0.5873605  0.10003270  0.3657116
  16                  350     0.5897280  0.09769164  0.3673586
  16                  400     0.5908082  0.09638033  0.3677169
  16                  450     0.5918074  0.09602485  0.3682480
  16                  500     0.5926390  0.09521776  0.3684173
  16                  550     0.5937057  0.09376815  0.3689461
  16                  600     0.5941788  0.09326162  0.3691744
  16                  650     0.5943592  0.09280916  0.3693076
  16                  700     0.5947568  0.09225621  0.3695166
  16                  750     0.5949403  0.09208724  0.3695637
  16                  800     0.5952754  0.09163793  0.3697149
  16                  850     0.5956522  0.09114995  0.3698401
  16                  900     0.5956991  0.09109746  0.3698880
  16                  950     0.5959031  0.09103893  0.3699368
  16                 1000     0.5958828  0.09090244  0.3699651
  17                   50     0.5545557  0.12166054  0.3393389
  17                  100     0.5692239  0.11046381  0.3537977
  17                  150     0.5770709  0.10234490  0.3588184
  17                  200     0.5816371  0.09791505  0.3628589
  17                  250     0.5833785  0.09829753  0.3642594
  17                  300     0.5856648  0.09458468  0.3653939
  17                  350     0.5867969  0.09357249  0.3661471
  17                  400     0.5876315  0.09277722  0.3666249
  17                  450     0.5891141  0.09084876  0.3676131
  17                  500     0.5898168  0.09053690  0.3679031
  17                  550     0.5904756  0.08992150  0.3681307
  17                  600     0.5907264  0.09000211  0.3682468
  17                  650     0.5911765  0.08959616  0.3685972
  17                  700     0.5912397  0.08953562  0.3685547
  17                  750     0.5917070  0.08906404  0.3687844
  17                  800     0.5915780  0.08911650  0.3687076
  17                  850     0.5917135  0.08895452  0.3688157
  17                  900     0.5922291  0.08854989  0.3690603
  17                  950     0.5923325  0.08842640  0.3691157
  17                 1000     0.5924475  0.08826513  0.3691790
  18                   50     0.5505142  0.12568496  0.3435025
  18                  100     0.5673477  0.11190458  0.3553793
  18                  150     0.5757013  0.10236183  0.3615161
  18                  200     0.5803042  0.09939531  0.3651018
  18                  250     0.5819240  0.09933722  0.3662938
  18                  300     0.5839017  0.09807934  0.3677958
  18                  350     0.5856681  0.09630623  0.3687657
  18                  400     0.5856128  0.09652281  0.3688245
  18                  450     0.5867742  0.09519598  0.3693696
  18                  500     0.5879574  0.09488534  0.3698572
  18                  550     0.5891588  0.09384420  0.3701872
  18                  600     0.5894770  0.09314256  0.3704683
  18                  650     0.5898895  0.09275259  0.3707015
  18                  700     0.5904731  0.09249504  0.3709105
  18                  750     0.5906551  0.09196746  0.3710118
  18                  800     0.5909491  0.09158392  0.3712122
  18                  850     0.5912767  0.09135489  0.3713378
  18                  900     0.5915499  0.09106990  0.3714766
  18                  950     0.5916282  0.09081519  0.3714679
  18                 1000     0.5916689  0.09075198  0.3715015
  19                   50     0.5568388  0.12501886  0.3440201
  19                  100     0.5772961  0.10421439  0.3587060
  19                  150     0.5849819  0.09890322  0.3638665
  19                  200     0.5897435  0.09563993  0.3677138
  19                  250     0.5931317  0.09362189  0.3692032
  19                  300     0.5955103  0.09370107  0.3705583
  19                  350     0.5971513  0.09233041  0.3716963
  19                  400     0.5984851  0.09138619  0.3723932
  19                  450     0.5992056  0.09095749  0.3728553
  19                  500     0.6006882  0.08975024  0.3737571
  19                  550     0.6015137  0.08909809  0.3741917
  19                  600     0.6019959  0.08847557  0.3745817
  19                  650     0.6024821  0.08843409  0.3748256
  19                  700     0.6031734  0.08765087  0.3751474
  19                  750     0.6034751  0.08731235  0.3754161
  19                  800     0.6038583  0.08701007  0.3756354
  19                  850     0.6041995  0.08682277  0.3757715
  19                  900     0.6043533  0.08660278  0.3759177
  19                  950     0.6045401  0.08639963  0.3759935
  19                 1000     0.6048450  0.08626342  0.3761410
  20                   50     0.5555047  0.12189357  0.3367630
  20                  100     0.5720407  0.10797435  0.3526250
  20                  150     0.5769324  0.10461912  0.3572071
  20                  200     0.5837022  0.09677899  0.3611854
  20                  250     0.5858576  0.09675706  0.3625016
  20                  300     0.5897003  0.09442901  0.3644864
  20                  350     0.5916716  0.09281047  0.3657568
  20                  400     0.5928146  0.09122657  0.3664630
  20                  450     0.5942447  0.09000727  0.3673727
  20                  500     0.5952762  0.08937064  0.3678512
  20                  550     0.5962510  0.08886451  0.3682580
  20                  600     0.5972056  0.08792226  0.3688632
  20                  650     0.5977219  0.08755390  0.3692368
  20                  700     0.5978585  0.08721149  0.3692640
  20                  750     0.5984538  0.08678052  0.3695976
  20                  800     0.5983658  0.08657289  0.3695823
  20                  850     0.5986457  0.08621178  0.3696953
  20                  900     0.5988585  0.08604269  0.3698326
  20                  950     0.5991466  0.08589197  0.3699546
  20                 1000     0.5993148  0.08577172  0.3699632

Tuning parameter 'shrinkage' was held constant at a value of 0.1

Tuning parameter 'n.minobsinnode' was held constant at a value of 10
RMSE was used to select the optimal model using the smallest value.
The final values used for the model were n.trees = 50, interaction.depth =
 3, shrinkage = 0.1 and n.minobsinnode = 10.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>models_LR1 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">ranger =</span> ranger_red, </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">xgb =</span> xgb_red,</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">gbm =</span> gbm_red)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a><span class="do">## Importance frame (wide format) ===</span></span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>importance_wide <span class="ot">&lt;-</span> <span class="fu">cbind</span>(</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">varImp</span>(ranger_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_ranger =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Imp_ranger"</span> <span class="ot">=</span> <span class="st">"Overall"</span>),</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary.gbm</span>(gbm_red<span class="sc">$</span>finalModel, <span class="at">plotit=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, round, <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_gbm =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(rel.inf)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Imp_gbm"</span> <span class="ot">=</span> <span class="st">"rel.inf"</span>),</span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">varImp</span>(xgb_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_gbm =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Imp_gbm"</span> <span class="ot">=</span> <span class="st">"Overall"</span>))  <span class="sc">%&gt;%</span> </span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable</span>()</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a><span class="do">## Importance frame (long format for plotting) ===</span></span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a>importances_long_LR1 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(</span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">varImp</span>(ranger_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">rownames</span>(.),</span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a>           <span class="at">model =</span> <span class="st">"ranger"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Importance"</span> <span class="ot">=</span> <span class="st">"Overall"</span>),</span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary.gbm</span>(gbm_red<span class="sc">$</span>finalModel, <span class="at">plotit=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, round, <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">rownames</span>(.),</span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a>           <span class="at">model =</span> <span class="st">"gbm"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(rel.inf)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Importance"</span> <span class="ot">=</span> <span class="st">"rel.inf"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(variable, model, Importance)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="fu">varImp</span>(xgb_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">rownames</span>(.),</span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a>           <span class="at">model =</span> <span class="st">"xgb"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Importance"</span> <span class="ot">=</span> <span class="st">"Overall"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hypothesis =</span> <span class="fu">case_when</span>(variable <span class="sc">%in%</span> H1_vars <span class="sc">~</span> <span class="st">"H1"</span>,</span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a>                                variable <span class="sc">%in%</span> H2_vars <span class="sc">~</span> <span class="st">"H2"</span>,</span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a>                                variable <span class="sc">%in%</span> H3_vars <span class="sc">~</span> <span class="st">"H3"</span>,</span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a>                                variable <span class="sc">%in%</span> H4_vars <span class="sc">~</span> <span class="st">"H4"</span>,</span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a>                                <span class="at">.default =</span> <span class="st">"H1"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(Importance, variable, model)`
Joining with `by = join_by(Importance, variable, model)`</code></pre>
</div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="do">## reduced:</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>ranger_red <span class="ot">&lt;-</span> saved_models[[<span class="dv">4</span>]][[<span class="dv">1</span>]]</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>xgb_red <span class="ot">&lt;-</span> saved_models[[<span class="dv">4</span>]][[<span class="dv">2</span>]]</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>gbm_red <span class="ot">&lt;-</span> saved_models[[<span class="dv">4</span>]][[<span class="dv">3</span>]]</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Ranger =====</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>ranger_red<span class="sc">$</span>finalModel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Ranger result

Call:
 ranger::ranger(dependent.variable.name = ".outcome", data = x,      mtry = min(param$mtry, ncol(x)), min.node.size = param$min.node.size,      splitrule = as.character(param$splitrule), write.forest = TRUE,      probability = classProbs, ...) 

Type:                             Regression 
Number of trees:                  5000 
Sample size:                      823 
Number of independent variables:  55 
Mtry:                             52 
Target node size:                 5 
Variable importance mode:         permutation 
Splitrule:                        extratrees 
Number of random splits:          1 
OOB prediction error (MSE):       0.260595 
R squared (OOB):                  0.1607592 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>ranger_red<span class="sc">$</span>results</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   mtry min.node.size  splitrule      RMSE  Rsquared       MAE     RMSESD
1     2             5   variance 0.5394176 0.1827108 0.3306246 0.04327289
2     2             5 extratrees 0.5523844 0.1492828 0.3349185 0.04477997
3     4             5   variance 0.5363103 0.1825704 0.3298550 0.04310065
4     4             5 extratrees 0.5442179 0.1589400 0.3306828 0.04483804
5     7             5   variance 0.5352169 0.1825738 0.3300774 0.04234869
6     7             5 extratrees 0.5406468 0.1671234 0.3292856 0.04488829
7    10             5   variance 0.5351361 0.1822525 0.3302695 0.04206719
8    10             5 extratrees 0.5391743 0.1707950 0.3288732 0.04492560
9    13             5   variance 0.5350785 0.1815348 0.3307148 0.04079842
10   13             5 extratrees 0.5373425 0.1760238 0.3287188 0.04477033
11   15             5   variance 0.5350091 0.1816557 0.3307483 0.04098157
12   15             5 extratrees 0.5373931 0.1748776 0.3291373 0.04448990
13   18             5   variance 0.5351410 0.1810147 0.3312523 0.04113763
14   18             5 extratrees 0.5362650 0.1789442 0.3288775 0.04440944
15   21             5   variance 0.5352901 0.1808704 0.3318494 0.04104371
16   21             5 extratrees 0.5357438 0.1799888 0.3291477 0.04424566
17   24             5   variance 0.5358828 0.1789333 0.3322976 0.04044356
18   24             5 extratrees 0.5354245 0.1809650 0.3292783 0.04373709
19   27             5   variance 0.5361697 0.1778851 0.3326148 0.04012501
20   27             5 extratrees 0.5350873 0.1816643 0.3292259 0.04383781
21   29             5   variance 0.5357883 0.1788138 0.3328233 0.03961067
22   29             5 extratrees 0.5349069 0.1817657 0.3295423 0.04327749
23   32             5   variance 0.5361444 0.1778585 0.3332305 0.03940203
24   32             5 extratrees 0.5345948 0.1827137 0.3291906 0.04292078
25   35             5   variance 0.5361837 0.1778279 0.3332777 0.03939331
26   35             5 extratrees 0.5347364 0.1823905 0.3294745 0.04321173
27   38             5   variance 0.5360743 0.1786488 0.3333957 0.03961153
28   38             5 extratrees 0.5343217 0.1841272 0.3297860 0.04340730
29   41             5   variance 0.5369598 0.1759463 0.3341374 0.03908748
30   41             5 extratrees 0.5344115 0.1835345 0.3296798 0.04261963
31   43             5   variance 0.5363456 0.1775281 0.3339625 0.03935771
32   43             5 extratrees 0.5340870 0.1844424 0.3298840 0.04273121
33   46             5   variance 0.5366504 0.1767557 0.3342629 0.03928290
34   46             5 extratrees 0.5343518 0.1836526 0.3303575 0.04264377
35   49             5   variance 0.5366978 0.1771860 0.3346697 0.03888073
36   49             5 extratrees 0.5339151 0.1850448 0.3301933 0.04256041
37   52             5   variance 0.5359135 0.1793983 0.3342563 0.03911702
38   52             5 extratrees 0.5335750 0.1858403 0.3301628 0.04240879
39   55             5   variance 0.5362471 0.1780607 0.3345988 0.03885057
40   55             5 extratrees 0.5337027 0.1853486 0.3301865 0.04226864
   RsquaredSD      MAESD
1  0.07045222 0.02131811
2  0.05953501 0.02004773
3  0.07023492 0.02281210
4  0.05955095 0.01969794
5  0.07092028 0.02308931
6  0.06235290 0.02047200
7  0.07306720 0.02322794
8  0.06392628 0.02089837
9  0.07118503 0.02303430
10 0.06591139 0.02102673
11 0.07084756 0.02321266
12 0.06500377 0.02102702
13 0.07054534 0.02360130
14 0.06815576 0.02128205
15 0.07034732 0.02356806
16 0.06681332 0.02169639
17 0.06887006 0.02313728
18 0.06743650 0.02127323
19 0.06954124 0.02317380
20 0.06823480 0.02166295
21 0.06938808 0.02289528
22 0.06717462 0.02158153
23 0.06908141 0.02317079
24 0.06730542 0.02132558
25 0.06915109 0.02318020
26 0.06799370 0.02176180
27 0.07029267 0.02333715
28 0.07016370 0.02218647
29 0.06979509 0.02303449
30 0.06860967 0.02212117
31 0.06938452 0.02298471
32 0.06836062 0.02216306
33 0.06832239 0.02317263
34 0.06949483 0.02228954
35 0.07105095 0.02293741
36 0.07033181 0.02231595
37 0.07021162 0.02320422
38 0.06829109 0.02241744
39 0.06923502 0.02327748
40 0.06806453 0.02226296</code></pre>
</div>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(ranger_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="do">## XGB ======</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(xgb_red)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-8-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>xgb_red</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>eXtreme Gradient Boosting 

823 samples
 33 predictor

No pre-processing
Resampling: Cross-Validated (10 fold, repeated 3 times) 
Summary of sample sizes: 659, 659, 659, 659, 659, 659, ... 
Resampling results across tuning parameters:

  eta  max_depth  gamma  RMSE       Rsquared   MAE      
  0.1  2          0.00   0.5652899  0.1370843  0.3599389
  0.1  2          0.01   0.5672961  0.1358266  0.3639662
  0.1  2          0.10   0.5537492  0.1468136  0.3521526
  0.1  3          0.00   0.5546626  0.1508666  0.3553504
  0.1  3          0.01   0.5564022  0.1489859  0.3544660
  0.1  3          0.10   0.5486632  0.1611224  0.3496976
  0.1  5          0.00   0.5502365  0.1535777  0.3449824
  0.1  5          0.01   0.5491901  0.1488905  0.3497933
  0.1  5          0.10   0.5452046  0.1597737  0.3436322
  0.3  2          0.00   0.5818567  0.1225535  0.3773395
  0.3  2          0.01   0.5733998  0.1315226  0.3687969
  0.3  2          0.10   0.5629095  0.1430002  0.3608346
  0.3  3          0.00   0.5659087  0.1453970  0.3692202
  0.3  3          0.01   0.5717958  0.1293219  0.3664367
  0.3  3          0.10   0.5608630  0.1385928  0.3602765
  0.3  5          0.00   0.5592023  0.1381370  0.3563390
  0.3  5          0.01   0.5589321  0.1422411  0.3560095
  0.3  5          0.10   0.5624472  0.1341673  0.3527788

Tuning parameter 'nrounds' was held constant at a value of 1000

Tuning parameter 'min_child_weight' was held constant at a value of 1

Tuning parameter 'subsample' was held constant at a value of 1
RMSE was used to select the optimal model using the smallest value.
The final values used for the model were nrounds = 1000, max_depth = 5, eta
 = 0.1, gamma = 0.1, colsample_bytree = 0.6, min_child_weight = 1 and
 subsample = 1.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="do">## GBM =====</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>gbm_red<span class="sc">$</span>finalModel</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>A gradient boosted model with gaussian loss function.
50 iterations were performed.
There were 55 predictors of which 32 had non-zero influence.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>gbm_red</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Stochastic Gradient Boosting 

823 samples
 33 predictor

No pre-processing
Resampling: Cross-Validated (10 fold, repeated 3 times) 
Summary of sample sizes: 659, 659, 659, 659, 659, 659, ... 
Resampling results across tuning parameters:

  interaction.depth  n.trees  RMSE       Rsquared   MAE      
   1                   50     0.5435340  0.1725076  0.3401265
   1                  100     0.5386692  0.1778030  0.3401935
   1                  150     0.5394407  0.1746568  0.3421430
   1                  200     0.5423092  0.1661049  0.3456837
   1                  250     0.5429783  0.1619924  0.3483008
   1                  300     0.5445351  0.1597740  0.3506808
   1                  350     0.5461206  0.1592224  0.3536882
   1                  400     0.5474695  0.1562333  0.3560610
   1                  450     0.5492929  0.1524881  0.3585873
   1                  500     0.5482417  0.1566053  0.3596622
   1                  550     0.5488017  0.1556647  0.3604591
   1                  600     0.5510617  0.1528386  0.3630761
   1                  650     0.5510306  0.1526667  0.3643218
   1                  700     0.5522670  0.1508417  0.3668228
   1                  750     0.5542436  0.1480501  0.3698860
   1                  800     0.5546132  0.1481969  0.3700358
   1                  850     0.5569744  0.1448902  0.3718863
   1                  900     0.5591735  0.1424688  0.3741230
   1                  950     0.5615479  0.1388344  0.3757025
   1                 1000     0.5609431  0.1399510  0.3745292
   2                   50     0.5420891  0.1619915  0.3410091
   2                  100     0.5446668  0.1521755  0.3486964
   2                  150     0.5419179  0.1653923  0.3493598
   2                  200     0.5475804  0.1569544  0.3549530
   2                  250     0.5495773  0.1560494  0.3597635
   2                  300     0.5522220  0.1534553  0.3615395
   2                  350     0.5571143  0.1450038  0.3645586
   2                  400     0.5586398  0.1440451  0.3660280
   2                  450     0.5627815  0.1389216  0.3704415
   2                  500     0.5652501  0.1359031  0.3726427
   2                  550     0.5662805  0.1350053  0.3737641
   2                  600     0.5689036  0.1308502  0.3769858
   2                  650     0.5710852  0.1284044  0.3786963
   2                  700     0.5722107  0.1271664  0.3800573
   2                  750     0.5737294  0.1261726  0.3813939
   2                  800     0.5747590  0.1256980  0.3822457
   2                  850     0.5748160  0.1274190  0.3821215
   2                  900     0.5755890  0.1267643  0.3830680
   2                  950     0.5764352  0.1253102  0.3834816
   2                 1000     0.5786441  0.1232617  0.3849067
   3                   50     0.5404720  0.1657643  0.3396822
   3                  100     0.5418197  0.1688569  0.3456548
   3                  150     0.5445996  0.1628527  0.3489217
   3                  200     0.5451721  0.1677858  0.3530574
   3                  250     0.5508788  0.1590540  0.3589441
   3                  300     0.5558333  0.1523450  0.3627655
   3                  350     0.5587983  0.1472432  0.3655728
   3                  400     0.5624810  0.1418606  0.3673547
   3                  450     0.5664457  0.1359185  0.3695412
   3                  500     0.5694455  0.1324511  0.3723059
   3                  550     0.5708555  0.1321255  0.3737038
   3                  600     0.5706920  0.1334693  0.3735465
   3                  650     0.5722406  0.1318835  0.3751978
   3                  700     0.5739100  0.1300385  0.3766772
   3                  750     0.5755412  0.1277036  0.3778382
   3                  800     0.5765745  0.1262573  0.3784540
   3                  850     0.5778049  0.1246908  0.3793165
   3                  900     0.5787741  0.1237804  0.3806852
   3                  950     0.5787050  0.1243689  0.3808195
   3                 1000     0.5789757  0.1246378  0.3812826
   4                   50     0.5392465  0.1690900  0.3398406
   4                  100     0.5437410  0.1631470  0.3481872
   4                  150     0.5472492  0.1596970  0.3537895
   4                  200     0.5522099  0.1517441  0.3599104
   4                  250     0.5552790  0.1508825  0.3615048
   4                  300     0.5570733  0.1493878  0.3639653
   4                  350     0.5607036  0.1449125  0.3664775
   4                  400     0.5611736  0.1461306  0.3667845
   4                  450     0.5644857  0.1409842  0.3682662
   4                  500     0.5657666  0.1400594  0.3695611
   4                  550     0.5661958  0.1404224  0.3694681
   4                  600     0.5673929  0.1393933  0.3701647
   4                  650     0.5675766  0.1393574  0.3699474
   4                  700     0.5685654  0.1382364  0.3707117
   4                  750     0.5698115  0.1366572  0.3721179
   4                  800     0.5706100  0.1361610  0.3726183
   4                  850     0.5709354  0.1359264  0.3728772
   4                  900     0.5715999  0.1352643  0.3731675
   4                  950     0.5725604  0.1334728  0.3736229
   4                 1000     0.5725949  0.1336090  0.3737679
   5                   50     0.5517576  0.1418638  0.3492837
   5                  100     0.5557799  0.1457220  0.3573030
   5                  150     0.5597292  0.1443120  0.3622145
   5                  200     0.5647009  0.1382170  0.3676612
   5                  250     0.5666992  0.1367723  0.3702063
   5                  300     0.5706818  0.1323741  0.3740871
   5                  350     0.5737315  0.1288594  0.3766271
   5                  400     0.5736835  0.1300122  0.3767334
   5                  450     0.5748104  0.1294181  0.3777935
   5                  500     0.5753617  0.1291891  0.3777419
   5                  550     0.5765608  0.1273073  0.3785762
   5                  600     0.5776865  0.1259324  0.3794708
   5                  650     0.5783598  0.1249584  0.3796550
   5                  700     0.5785844  0.1252472  0.3801715
   5                  750     0.5790990  0.1248671  0.3809436
   5                  800     0.5797999  0.1240231  0.3813883
   5                  850     0.5799455  0.1240017  0.3815767
   5                  900     0.5802683  0.1236322  0.3819464
   5                  950     0.5805969  0.1230546  0.3822003
   5                 1000     0.5806948  0.1230670  0.3823632
   6                   50     0.5462504  0.1561230  0.3452123
   6                  100     0.5514706  0.1491707  0.3570281
   6                  150     0.5552894  0.1458182  0.3603644
   6                  200     0.5600065  0.1400114  0.3642936
   6                  250     0.5645479  0.1338760  0.3676793
   6                  300     0.5670276  0.1304356  0.3692870
   6                  350     0.5672593  0.1310641  0.3704915
   6                  400     0.5696334  0.1290703  0.3723679
   6                  450     0.5704897  0.1288122  0.3734561
   6                  500     0.5706045  0.1290527  0.3737405
   6                  550     0.5718385  0.1273220  0.3744323
   6                  600     0.5727764  0.1260565  0.3751280
   6                  650     0.5732075  0.1256415  0.3757613
   6                  700     0.5732564  0.1258814  0.3761576
   6                  750     0.5735114  0.1258230  0.3763305
   6                  800     0.5732936  0.1262874  0.3762633
   6                  850     0.5730912  0.1268145  0.3762173
   6                  900     0.5734541  0.1263761  0.3764389
   6                  950     0.5734033  0.1266493  0.3764823
   6                 1000     0.5733968  0.1267272  0.3766440
   7                   50     0.5378094  0.1752265  0.3441194
   7                  100     0.5433111  0.1747641  0.3504528
   7                  150     0.5479397  0.1717937  0.3556577
   7                  200     0.5523310  0.1657099  0.3596427
   7                  250     0.5555076  0.1613582  0.3619909
   7                  300     0.5575027  0.1584420  0.3638399
   7                  350     0.5591596  0.1568336  0.3651577
   7                  400     0.5602831  0.1557860  0.3656587
   7                  450     0.5612796  0.1544388  0.3659612
   7                  500     0.5619919  0.1532327  0.3666425
   7                  550     0.5630979  0.1516573  0.3676396
   7                  600     0.5634200  0.1516095  0.3678125
   7                  650     0.5638781  0.1510006  0.3681610
   7                  700     0.5639960  0.1507522  0.3682634
   7                  750     0.5640180  0.1507833  0.3684074
   7                  800     0.5641614  0.1506221  0.3684997
   7                  850     0.5642576  0.1505786  0.3685778
   7                  900     0.5643929  0.1503901  0.3686600
   7                  950     0.5644964  0.1502899  0.3687694
   7                 1000     0.5644640  0.1503958  0.3688119
   8                   50     0.5465278  0.1556335  0.3486363
   8                  100     0.5536872  0.1513301  0.3596422
   8                  150     0.5584303  0.1480592  0.3639517
   8                  200     0.5633647  0.1405858  0.3672596
   8                  250     0.5669173  0.1354042  0.3702147
   8                  300     0.5693604  0.1323792  0.3716203
   8                  350     0.5703517  0.1316742  0.3729022
   8                  400     0.5709676  0.1323827  0.3740529
   8                  450     0.5722419  0.1307272  0.3747663
   8                  500     0.5732558  0.1298752  0.3752286
   8                  550     0.5739770  0.1289958  0.3759073
   8                  600     0.5740893  0.1291631  0.3759533
   8                  650     0.5740911  0.1295278  0.3760576
   8                  700     0.5745476  0.1289141  0.3764545
   8                  750     0.5745546  0.1291928  0.3764068
   8                  800     0.5744373  0.1295084  0.3761990
   8                  850     0.5745369  0.1294330  0.3762800
   8                  900     0.5745762  0.1294067  0.3763718
   8                  950     0.5746131  0.1294200  0.3764258
   8                 1000     0.5746798  0.1293376  0.3765098
   9                   50     0.5397554  0.1768093  0.3470516
   9                  100     0.5458968  0.1715482  0.3552530
   9                  150     0.5513230  0.1659488  0.3601858
   9                  200     0.5559849  0.1594670  0.3634127
   9                  250     0.5582653  0.1579514  0.3654427
   9                  300     0.5599125  0.1553335  0.3665832
   9                  350     0.5610806  0.1543081  0.3682041
   9                  400     0.5615299  0.1541571  0.3687943
   9                  450     0.5616859  0.1544125  0.3688973
   9                  500     0.5620566  0.1538690  0.3693203
   9                  550     0.5627483  0.1527296  0.3699013
   9                  600     0.5628900  0.1526717  0.3698823
   9                  650     0.5631089  0.1524520  0.3700319
   9                  700     0.5630597  0.1524914  0.3699887
   9                  750     0.5632000  0.1524935  0.3701253
   9                  800     0.5632287  0.1524949  0.3700930
   9                  850     0.5632631  0.1525165  0.3700578
   9                  900     0.5632745  0.1525503  0.3700584
   9                  950     0.5633185  0.1524831  0.3701258
   9                 1000     0.5632658  0.1525950  0.3700872
  10                   50     0.5479329  0.1595555  0.3473598
  10                  100     0.5560735  0.1498948  0.3590347
  10                  150     0.5627648  0.1424792  0.3656957
  10                  200     0.5670025  0.1367890  0.3694764
  10                  250     0.5689548  0.1341975  0.3705474
  10                  300     0.5716682  0.1305974  0.3731400
  10                  350     0.5723019  0.1305110  0.3739690
  10                  400     0.5730169  0.1304022  0.3749035
  10                  450     0.5738092  0.1290531  0.3755303
  10                  500     0.5740077  0.1292188  0.3758022
  10                  550     0.5741381  0.1292520  0.3759381
  10                  600     0.5742190  0.1292827  0.3759729
  10                  650     0.5743181  0.1291403  0.3760833
  10                  700     0.5743132  0.1291837  0.3761027
  10                  750     0.5743356  0.1292262  0.3761364
  10                  800     0.5744417  0.1290907  0.3762873
  10                  850     0.5745377  0.1289574  0.3763350
  10                  900     0.5746054  0.1288473  0.3763628
  10                  950     0.5746386  0.1288578  0.3764010
  10                 1000     0.5746380  0.1288680  0.3763941
  11                   50     0.5441818  0.1606796  0.3482712
  11                  100     0.5497133  0.1583966  0.3576095
  11                  150     0.5560228  0.1493726  0.3621946
  11                  200     0.5596621  0.1454334  0.3645923
  11                  250     0.5626085  0.1423597  0.3666927
  11                  300     0.5641731  0.1402532  0.3676519
  11                  350     0.5652659  0.1396496  0.3690342
  11                  400     0.5660220  0.1385469  0.3696948
  11                  450     0.5664049  0.1384240  0.3702493
  11                  500     0.5668304  0.1377082  0.3705263
  11                  550     0.5671592  0.1373371  0.3707951
  11                  600     0.5674809  0.1369477  0.3709850
  11                  650     0.5674525  0.1370396  0.3709618
  11                  700     0.5676150  0.1368011  0.3710817
  11                  750     0.5677128  0.1366422  0.3711927
  11                  800     0.5676845  0.1368104  0.3712545
  11                  850     0.5677508  0.1367157  0.3712690
  11                  900     0.5677400  0.1368046  0.3713302
  11                  950     0.5677959  0.1367216  0.3713916
  11                 1000     0.5677918  0.1367871  0.3714061
  12                   50     0.5486969  0.1557104  0.3514358
  12                  100     0.5552754  0.1516340  0.3599501
  12                  150     0.5620314  0.1434373  0.3644974
  12                  200     0.5675687  0.1349275  0.3682724
  12                  250     0.5680101  0.1358575  0.3695771
  12                  300     0.5683923  0.1363312  0.3702252
  12                  350     0.5698257  0.1346120  0.3713010
  12                  400     0.5708860  0.1329419  0.3720778
  12                  450     0.5713183  0.1323765  0.3725445
  12                  500     0.5716847  0.1318076  0.3726861
  12                  550     0.5717026  0.1321116  0.3727598
  12                  600     0.5717443  0.1321932  0.3728891
  12                  650     0.5719468  0.1319131  0.3730767
  12                  700     0.5718986  0.1321071  0.3731357
  12                  750     0.5719118  0.1319763  0.3731030
  12                  800     0.5720270  0.1318131  0.3732050
  12                  850     0.5722275  0.1315990  0.3732938
  12                  900     0.5722825  0.1315665  0.3733747
  12                  950     0.5722455  0.1316775  0.3734095
  12                 1000     0.5722097  0.1318034  0.3734055
  13                   50     0.5402188  0.1720905  0.3485329
  13                  100     0.5522713  0.1518652  0.3598521
  13                  150     0.5571034  0.1490147  0.3640914
  13                  200     0.5591038  0.1476936  0.3670438
  13                  250     0.5613849  0.1458476  0.3687285
  13                  300     0.5627262  0.1450748  0.3703304
  13                  350     0.5637731  0.1439518  0.3713033
  13                  400     0.5645554  0.1429202  0.3723207
  13                  450     0.5651612  0.1420776  0.3728375
  13                  500     0.5655916  0.1415256  0.3731084
  13                  550     0.5658390  0.1413508  0.3732993
  13                  600     0.5660754  0.1410674  0.3734960
  13                  650     0.5661553  0.1412253  0.3736626
  13                  700     0.5662425  0.1411439  0.3737476
  13                  750     0.5663400  0.1410830  0.3737879
  13                  800     0.5663475  0.1411831  0.3738168
  13                  850     0.5664854  0.1409492  0.3739146
  13                  900     0.5665471  0.1409752  0.3740156
  13                  950     0.5665988  0.1409574  0.3740534
  13                 1000     0.5666573  0.1409706  0.3740807
  14                   50     0.5466903  0.1593075  0.3485899
  14                  100     0.5538054  0.1531953  0.3569143
  14                  150     0.5606127  0.1446332  0.3627351
  14                  200     0.5640223  0.1412382  0.3657916
  14                  250     0.5665972  0.1386975  0.3672909
  14                  300     0.5672575  0.1386501  0.3678960
  14                  350     0.5679869  0.1381003  0.3685011
  14                  400     0.5688754  0.1365875  0.3692443
  14                  450     0.5692982  0.1361094  0.3696157
  14                  500     0.5696525  0.1356693  0.3700169
  14                  550     0.5698437  0.1356705  0.3700207
  14                  600     0.5701022  0.1355239  0.3702518
  14                  650     0.5701231  0.1357210  0.3702273
  14                  700     0.5702763  0.1356363  0.3703548
  14                  750     0.5703191  0.1357390  0.3704201
  14                  800     0.5704118  0.1357495  0.3705184
  14                  850     0.5704669  0.1357367  0.3705517
  14                  900     0.5705359  0.1357101  0.3706261
  14                  950     0.5705255  0.1357297  0.3706455
  14                 1000     0.5705374  0.1357559  0.3706775
  15                   50     0.5428859  0.1723794  0.3474859
  15                  100     0.5509054  0.1585915  0.3567359
  15                  150     0.5584114  0.1480524  0.3611537
  15                  200     0.5619715  0.1451323  0.3638634
  15                  250     0.5649838  0.1416001  0.3661820
  15                  300     0.5660400  0.1411948  0.3673904
  15                  350     0.5669079  0.1403230  0.3683613
  15                  400     0.5676357  0.1396901  0.3687451
  15                  450     0.5682201  0.1390807  0.3693522
  15                  500     0.5685675  0.1387953  0.3697387
  15                  550     0.5689770  0.1386209  0.3700281
  15                  600     0.5692874  0.1382838  0.3702165
  15                  650     0.5693541  0.1384084  0.3701966
  15                  700     0.5692911  0.1386319  0.3701522
  15                  750     0.5693165  0.1385358  0.3701469
  15                  800     0.5694504  0.1384136  0.3701988
  15                  850     0.5695188  0.1383351  0.3702854
  15                  900     0.5695686  0.1384205  0.3703544
  15                  950     0.5695529  0.1385538  0.3704281
  15                 1000     0.5696797  0.1383867  0.3704765
  16                   50     0.5506425  0.1507968  0.3529644
  16                  100     0.5616128  0.1362654  0.3634280
  16                  150     0.5659887  0.1328752  0.3676430
  16                  200     0.5685411  0.1305190  0.3687205
  16                  250     0.5698773  0.1300317  0.3702114
  16                  300     0.5713070  0.1285689  0.3717679
  16                  350     0.5731035  0.1258093  0.3725103
  16                  400     0.5733734  0.1263990  0.3729288
  16                  450     0.5745182  0.1245032  0.3734173
  16                  500     0.5747431  0.1244774  0.3738280
  16                  550     0.5749237  0.1248925  0.3740282
  16                  600     0.5749939  0.1248818  0.3741850
  16                  650     0.5749882  0.1250946  0.3742661
  16                  700     0.5751892  0.1250553  0.3744467
  16                  750     0.5751432  0.1252821  0.3744317
  16                  800     0.5752108  0.1253867  0.3745526
  16                  850     0.5752817  0.1252798  0.3746187
  16                  900     0.5753969  0.1252230  0.3746964
  16                  950     0.5754475  0.1252255  0.3747401
  16                 1000     0.5753680  0.1254596  0.3747167
  17                   50     0.5536390  0.1431971  0.3543933
  17                  100     0.5613865  0.1402918  0.3627648
  17                  150     0.5687570  0.1316996  0.3689763
  17                  200     0.5712300  0.1298115  0.3708426
  17                  250     0.5740503  0.1266863  0.3735552
  17                  300     0.5746718  0.1267227  0.3741863
  17                  350     0.5765736  0.1245523  0.3756650
  17                  400     0.5774495  0.1240042  0.3763274
  17                  450     0.5783740  0.1231661  0.3768496
  17                  500     0.5790800  0.1223745  0.3772687
  17                  550     0.5794114  0.1220988  0.3773275
  17                  600     0.5798206  0.1214808  0.3777110
  17                  650     0.5800443  0.1214582  0.3778407
  17                  700     0.5800997  0.1216585  0.3779169
  17                  750     0.5802774  0.1214462  0.3781291
  17                  800     0.5802877  0.1216969  0.3782201
  17                  850     0.5803490  0.1217670  0.3782772
  17                  900     0.5803080  0.1219123  0.3783203
  17                  950     0.5803740  0.1219102  0.3783546
  17                 1000     0.5806250  0.1215754  0.3785561
  18                   50     0.5434862  0.1672202  0.3482437
  18                  100     0.5515199  0.1590088  0.3586968
  18                  150     0.5590352  0.1476074  0.3639811
  18                  200     0.5605794  0.1472273  0.3664598
  18                  250     0.5636318  0.1432375  0.3682549
  18                  300     0.5650406  0.1412924  0.3693214
  18                  350     0.5656539  0.1412437  0.3698649
  18                  400     0.5665835  0.1403341  0.3706158
  18                  450     0.5664022  0.1411758  0.3706151
  18                  500     0.5674829  0.1395665  0.3713515
  18                  550     0.5675251  0.1397180  0.3714956
  18                  600     0.5679198  0.1392456  0.3717211
  18                  650     0.5679891  0.1392878  0.3718608
  18                  700     0.5681697  0.1391801  0.3719882
  18                  750     0.5681135  0.1394783  0.3720042
  18                  800     0.5680679  0.1396554  0.3719883
  18                  850     0.5681990  0.1394064  0.3721081
  18                  900     0.5682152  0.1396242  0.3721085
  18                  950     0.5682717  0.1395839  0.3721704
  18                 1000     0.5683152  0.1395887  0.3721771
  19                   50     0.5449640  0.1648043  0.3514489
  19                  100     0.5546267  0.1543763  0.3625809
  19                  150     0.5606773  0.1472528  0.3682896
  19                  200     0.5631468  0.1444462  0.3696570
  19                  250     0.5671518  0.1396552  0.3719902
  19                  300     0.5682363  0.1392526  0.3724019
  19                  350     0.5687737  0.1392618  0.3726532
  19                  400     0.5700830  0.1378876  0.3734352
  19                  450     0.5701670  0.1378543  0.3736901
  19                  500     0.5705627  0.1375201  0.3738553
  19                  550     0.5709605  0.1371756  0.3740677
  19                  600     0.5713797  0.1368640  0.3743496
  19                  650     0.5716557  0.1367334  0.3745341
  19                  700     0.5716855  0.1367524  0.3745393
  19                  750     0.5718351  0.1367030  0.3746433
  19                  800     0.5721004  0.1363798  0.3748130
  19                  850     0.5721799  0.1362699  0.3748782
  19                  900     0.5721948  0.1362745  0.3748838
  19                  950     0.5721885  0.1364253  0.3749420
  19                 1000     0.5721987  0.1364195  0.3749638
  20                   50     0.5482480  0.1572856  0.3488554
  20                  100     0.5556374  0.1497144  0.3599358
  20                  150     0.5576255  0.1511267  0.3652327
  20                  200     0.5613336  0.1474933  0.3676494
  20                  250     0.5639905  0.1441678  0.3695924
  20                  300     0.5656516  0.1420081  0.3709471
  20                  350     0.5663072  0.1419029  0.3712257
  20                  400     0.5670309  0.1418311  0.3718109
  20                  450     0.5675614  0.1413524  0.3721823
  20                  500     0.5679185  0.1411196  0.3722005
  20                  550     0.5689408  0.1394624  0.3726249
  20                  600     0.5688152  0.1402204  0.3727181
  20                  650     0.5691985  0.1396950  0.3729195
  20                  700     0.5695188  0.1394175  0.3731282
  20                  750     0.5695374  0.1396411  0.3730788
  20                  800     0.5693568  0.1400280  0.3730525
  20                  850     0.5694771  0.1399299  0.3730905
  20                  900     0.5696971  0.1396251  0.3732414
  20                  950     0.5696151  0.1398476  0.3731960
  20                 1000     0.5695910  0.1399408  0.3731869

Tuning parameter 'shrinkage' was held constant at a value of 0.1

Tuning parameter 'n.minobsinnode' was held constant at a value of 10
RMSE was used to select the optimal model using the smallest value.
The final values used for the model were n.trees = 50, interaction.depth =
 7, shrinkage = 0.1 and n.minobsinnode = 10.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>models_LR2 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">ranger =</span> ranger_red, </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>                  <span class="at">xgb =</span> xgb_red,</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>                  <span class="at">gbm =</span> gbm_red)</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="do">## Importance frame (wide format) ===</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>importance_wide <span class="ot">&lt;-</span> <span class="fu">cbind</span>(</span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">varImp</span>(ranger_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_ranger =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Imp_ranger"</span> <span class="ot">=</span> <span class="st">"Overall"</span>),</span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary.gbm</span>(gbm_red<span class="sc">$</span>finalModel, <span class="at">plotit=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, round, <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_gbm =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(rel.inf)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Imp_gbm"</span> <span class="ot">=</span> <span class="st">"rel.inf"</span>),</span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">varImp</span>(xgb_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">var_gbm =</span> <span class="fu">rownames</span>(.)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Imp_gbm"</span> <span class="ot">=</span> <span class="st">"Overall"</span>)</span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a>)  <span class="sc">%&gt;%</span> kableExtra<span class="sc">::</span><span class="fu">kable</span>()</span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-28"><a href="#cb59-28" aria-hidden="true" tabindex="-1"></a><span class="do">## Importance frame (long format for plotting) ===</span></span>
<span id="cb59-29"><a href="#cb59-29" aria-hidden="true" tabindex="-1"></a>importances_long_LR2 <span class="ot">&lt;-</span> <span class="fu">full_join</span>(</span>
<span id="cb59-30"><a href="#cb59-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">varImp</span>(ranger_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb59-31"><a href="#cb59-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-32"><a href="#cb59-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">rownames</span>(.),</span>
<span id="cb59-33"><a href="#cb59-33" aria-hidden="true" tabindex="-1"></a>           <span class="at">model =</span> <span class="st">"ranger"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-34"><a href="#cb59-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-35"><a href="#cb59-35" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Importance"</span> <span class="ot">=</span> <span class="st">"Overall"</span>),</span>
<span id="cb59-36"><a href="#cb59-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary.gbm</span>(gbm_red<span class="sc">$</span>finalModel, <span class="at">plotit=</span><span class="cn">FALSE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-37"><a href="#cb59-37" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate_if</span>(is.numeric, round, <span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-38"><a href="#cb59-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">rownames</span>(.),</span>
<span id="cb59-39"><a href="#cb59-39" aria-hidden="true" tabindex="-1"></a>           <span class="at">model =</span> <span class="st">"gbm"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-40"><a href="#cb59-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(rel.inf)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-41"><a href="#cb59-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Importance"</span> <span class="ot">=</span> <span class="st">"rel.inf"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-42"><a href="#cb59-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(variable, model, Importance)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-43"><a href="#cb59-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(<span class="fu">varImp</span>(xgb_red)<span class="sc">$</span>importance <span class="sc">%&gt;%</span> </span>
<span id="cb59-44"><a href="#cb59-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">round</span>(<span class="dv">2</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-45"><a href="#cb59-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">rownames</span>(.),</span>
<span id="cb59-46"><a href="#cb59-46" aria-hidden="true" tabindex="-1"></a>           <span class="at">model =</span> <span class="st">"xgb"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb59-47"><a href="#cb59-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">arrange</span>(<span class="fu">desc</span>(Overall)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-48"><a href="#cb59-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Importance"</span> <span class="ot">=</span> <span class="st">"Overall"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb59-49"><a href="#cb59-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hypothesis =</span> <span class="fu">case_when</span>(variable <span class="sc">%in%</span> H1_vars <span class="sc">~</span> <span class="st">"H1"</span>,</span>
<span id="cb59-50"><a href="#cb59-50" aria-hidden="true" tabindex="-1"></a>                                variable <span class="sc">%in%</span> H2_vars <span class="sc">~</span> <span class="st">"H2"</span>,</span>
<span id="cb59-51"><a href="#cb59-51" aria-hidden="true" tabindex="-1"></a>                                variable <span class="sc">%in%</span> H3_vars <span class="sc">~</span> <span class="st">"H3"</span>,</span>
<span id="cb59-52"><a href="#cb59-52" aria-hidden="true" tabindex="-1"></a>                                variable <span class="sc">%in%</span> H4_vars <span class="sc">~</span> <span class="st">"H4"</span>,</span>
<span id="cb59-53"><a href="#cb59-53" aria-hidden="true" tabindex="-1"></a>                                <span class="at">.default =</span> <span class="st">"H1"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Joining with `by = join_by(Importance, variable, model)`
Joining with `by = join_by(Importance, variable, model)`</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="variable-importances-across-models" class="level3" data-number="3.0.2">
<h3 data-number="3.0.2" class="anchored" data-anchor-id="variable-importances-across-models"><span class="header-section-number">3.0.2</span> Variable Importances across models</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Jaccard 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Jaccard 2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">Log Ratio 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false">Log Ratio 2</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot variable importances across models:</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> importances_long_J1, </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> variable, <span class="at">x =</span> Importance, <span class="at">fill =</span> hypothesis))<span class="sc">+</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>model, <span class="at">scales =</span> <span class="st">"free"</span>)<span class="sc">+</span></span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"seagreen3"</span>, <span class="st">"mediumpurple"</span>, <span class="st">"darkorange"</span>, <span class="st">"gold"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot variable importances across models:</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> importances_long_J2, </span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> variable, <span class="at">x =</span> Importance, <span class="at">fill =</span> hypothesis))<span class="sc">+</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>model, <span class="at">scales =</span> <span class="st">"free"</span>)<span class="sc">+</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"seagreen3"</span>, <span class="st">"mediumpurple"</span>, <span class="st">"darkorange"</span>, <span class="st">"gold"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot variable importances across models:</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> importances_long_LR1, </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> variable, <span class="at">x =</span> Importance, <span class="at">fill =</span> hypothesis))<span class="sc">+</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>model, <span class="at">scales =</span> <span class="st">"free"</span>)<span class="sc">+</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"seagreen3"</span>, <span class="st">"mediumpurple"</span>, <span class="st">"darkorange"</span>, <span class="st">"gold"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot variable importances across models:</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> importances_long_LR2, </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">y =</span> variable, <span class="at">x =</span> Importance, <span class="at">fill =</span> hypothesis))<span class="sc">+</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()<span class="sc">+</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>model, <span class="at">scales =</span> <span class="st">"free"</span>)<span class="sc">+</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>()<span class="sc">+</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"seagreen3"</span>, <span class="st">"mediumpurple"</span>, <span class="st">"darkorange"</span>, <span class="st">"gold"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="resamples-across-models" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Resamples across models:</h1>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Jaccard 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Jaccard 2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">Log Ratio 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false">Log Ratio 2</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Jaccard 1</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Create resamples for each model</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>resamps_J1 <span class="ot">&lt;-</span> <span class="fu">resamples</span>(<span class="fu">list</span>(</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">ranger =</span> models_J1[[<span class="dv">1</span>]],</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">xgb =</span> models_J1[[<span class="dv">2</span>]],</span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">gbm =</span> models_J1[[<span class="dv">3</span>]]</span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in resamples.default(list(ranger = models_J1[[1]], xgb =
models_J1[[2]], : 'ranger' did not have 'returnResamp="final"; the optimal
tuning parameters are used</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in resamples.default(list(ranger = models_J1[[1]], xgb =
models_J1[[2]], : 'xgb' did not have 'returnResamp="final"; the optimal tuning
parameters are used</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in resamples.default(list(ranger = models_J1[[1]], xgb =
models_J1[[2]], : 'gbm' did not have 'returnResamp="final"; the optimal tuning
parameters are used</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the resampled error rates for each model</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>dotplot_resamps_J1 <span class="ot">&lt;-</span> <span class="fu">dotplot</span>(resamps_J1)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize the resamples</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>summary_resamps_J1 <span class="ot">&lt;-</span> <span class="fu">summary</span>(resamps_J1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create resamples for each model</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>resamps_J2 <span class="ot">&lt;-</span> <span class="fu">resamples</span>(<span class="fu">list</span>(</span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ranger =</span> models_J2[[<span class="dv">1</span>]],</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">xgb =</span> models_J2[[<span class="dv">2</span>]],</span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">gbm =</span> models_J2[[<span class="dv">3</span>]]</span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in resamples.default(list(ranger = models_J2[[1]], xgb =
models_J2[[2]], : 'ranger' did not have 'returnResamp="final"; the optimal
tuning parameters are used</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in resamples.default(list(ranger = models_J2[[1]], xgb =
models_J2[[2]], : 'xgb' did not have 'returnResamp="final"; the optimal tuning
parameters are used</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in resamples.default(list(ranger = models_J2[[1]], xgb =
models_J2[[2]], : 'gbm' did not have 'returnResamp="final"; the optimal tuning
parameters are used</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the resampled error rates for each model</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>dotplot_resamps_J2 <span class="ot">&lt;-</span> <span class="fu">dotplot</span>(resamps_J2)</span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize the resamples</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>summary_resamps_J2 <span class="ot">&lt;-</span> <span class="fu">summary</span>(resamps_J2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create resamples for each model</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>resamps_LR1 <span class="ot">&lt;-</span> <span class="fu">resamples</span>(<span class="fu">list</span>(</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ranger =</span> models_LR1[[<span class="dv">1</span>]],</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">xgb =</span> models_LR1[[<span class="dv">2</span>]],</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">gbm =</span> models_LR1[[<span class="dv">3</span>]]</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in resamples.default(list(ranger = models_LR1[[1]], xgb =
models_LR1[[2]], : 'ranger' did not have 'returnResamp="final"; the optimal
tuning parameters are used</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in resamples.default(list(ranger = models_LR1[[1]], xgb =
models_LR1[[2]], : 'xgb' did not have 'returnResamp="final"; the optimal tuning
parameters are used</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in resamples.default(list(ranger = models_LR1[[1]], xgb =
models_LR1[[2]], : 'gbm' did not have 'returnResamp="final"; the optimal tuning
parameters are used</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the resampled error rates for each model</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>dotplot_resamps_LR1 <span class="ot">&lt;-</span> <span class="fu">dotplot</span>(resamps_LR1)</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize the resamples</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>summary_resamps_LR1 <span class="ot">&lt;-</span> <span class="fu">summary</span>(resamps_LR1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create resamples for each model</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>resamps_LR2 <span class="ot">&lt;-</span> <span class="fu">resamples</span>(<span class="fu">list</span>(</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ranger =</span> models_LR2[[<span class="dv">1</span>]],</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">xgb =</span> models_LR2[[<span class="dv">2</span>]],</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">gbm =</span> models_LR2[[<span class="dv">3</span>]]</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in resamples.default(list(ranger = models_LR2[[1]], xgb =
models_LR2[[2]], : 'ranger' did not have 'returnResamp="final"; the optimal
tuning parameters are used</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in resamples.default(list(ranger = models_LR2[[1]], xgb =
models_LR2[[2]], : 'xgb' did not have 'returnResamp="final"; the optimal tuning
parameters are used</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in resamples.default(list(ranger = models_LR2[[1]], xgb =
models_LR2[[2]], : 'gbm' did not have 'returnResamp="final"; the optimal tuning
parameters are used</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the resampled error rates for each model</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>dotplot_resamps_LR2 <span class="ot">&lt;-</span> <span class="fu">dotplot</span>(resamps_LR2)</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize the resamples</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>summary_resamps_LR2 <span class="ot">&lt;-</span> <span class="fu">summary</span>(resamps_LR2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<section id="summary-across-all-analyses" class="level3" data-number="4.0.1">
<h3 data-number="4.0.1" class="anchored" data-anchor-id="summary-across-all-analyses"><span class="header-section-number">4.0.1</span> Summary across all analyses</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>resamples_all <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">Jaccard1 =</span> <span class="fu">list</span>(</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamps_J1 =</span> resamps_J1,</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Dotplot =</span> dotplot_resamps_J1, <span class="co"># store the dotplot object</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">Summary =</span> summary_resamps_J1  <span class="co"># store the summary object</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">Jaccard2 =</span> <span class="fu">list</span>(</span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamps_J2 =</span> resamps_J2,</span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">Dotplot =</span> dotplot_resamps_J2, <span class="co"># store the dotplot object</span></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">Summary =</span> summary_resamps_J2  <span class="co"># store the summary object</span></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">LogRatio1 =</span> <span class="fu">list</span>(</span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamps_LR1 =</span> resamps_LR1,</span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">Dotplot =</span> dotplot_resamps_LR1, <span class="co"># store the dotplot object</span></span>
<span id="cb85-15"><a href="#cb85-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">Summary =</span> summary_resamps_LR1  <span class="co"># store the summary object</span></span>
<span id="cb85-16"><a href="#cb85-16" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb85-17"><a href="#cb85-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">LogRatio2 =</span> <span class="fu">list</span>(</span>
<span id="cb85-18"><a href="#cb85-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">resamps_LR2 =</span> resamps_LR2,</span>
<span id="cb85-19"><a href="#cb85-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">Dotplot =</span> dotplot_resamps_LR2, <span class="co"># store the dotplot object</span></span>
<span id="cb85-20"><a href="#cb85-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">Summary =</span> summary_resamps_LR2  <span class="co"># store the summary object</span></span>
<span id="cb85-21"><a href="#cb85-21" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb85-22"><a href="#cb85-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-23"><a href="#cb85-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-24"><a href="#cb85-24" aria-hidden="true" tabindex="-1"></a>resamples_all</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>$Jaccard1
$Jaccard1$resamps_J1

Call:
resamples.default(x = list(ranger = models_J1[[1]], xgb = models_J1[[2]], gbm
 = models_J1[[3]]))

Models: ranger, xgb, gbm 
Number of resamples: 10 
Performance metrics: MAE, RMSE, Rsquared 
Time estimates for: everything, final model fit 

$Jaccard1$Dotplot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
$Jaccard1$Summary

Call:
summary.resamples(object = resamps_J1)

Models: ranger, xgb, gbm 
Number of resamples: 10 

MAE 
             Min.    1st Qu.     Median       Mean    3rd Qu.       Max. NA's
ranger 0.06829633 0.07169567 0.07270608 0.07364971 0.07571423 0.08141634    0
xgb    0.06740328 0.06906778 0.07147917 0.07206656 0.07467866 0.07734897    0
gbm    0.06421988 0.07039892 0.07168599 0.07268969 0.07604308 0.08220707    0

RMSE 
             Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
ranger 0.09892923 0.1027651 0.1091351 0.1111970 0.1156768 0.1297203    0
xgb    0.09876680 0.1020442 0.1048924 0.1096201 0.1182042 0.1315152    0
gbm    0.09474868 0.1000715 0.1039498 0.1099151 0.1165069 0.1362249    0

Rsquared 
            Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
ranger 0.7893557 0.8342709 0.8531349 0.8455695 0.8671522 0.8806199    0
xgb    0.7890662 0.8286518 0.8648936 0.8498558 0.8663667 0.8816143    0
gbm    0.7764380 0.8305198 0.8693117 0.8491608 0.8734892 0.8896350    0



$Jaccard2
$Jaccard2$resamps_J2

Call:
resamples.default(x = list(ranger = models_J2[[1]], xgb = models_J2[[2]], gbm
 = models_J2[[3]]))

Models: ranger, xgb, gbm 
Number of resamples: 10 
Performance metrics: MAE, RMSE, Rsquared 
Time estimates for: everything, final model fit 

$Jaccard2$Dotplot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-17-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
$Jaccard2$Summary

Call:
summary.resamples(object = resamps_J2)

Models: ranger, xgb, gbm 
Number of resamples: 10 

MAE 
             Min.    1st Qu.     Median       Mean    3rd Qu.       Max. NA's
ranger 0.07893936 0.08223173 0.08529537 0.08621790 0.09025959 0.09783803    0
xgb    0.07988486 0.08273490 0.08305801 0.08511744 0.08506362 0.09860895    0
gbm    0.08314703 0.08589038 0.08743914 0.08969457 0.09451449 0.09872513    0

RMSE 
            Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
ranger 0.1120621 0.1194030 0.1240289 0.1242679 0.1279603 0.1371445    0
xgb    0.1128614 0.1203841 0.1248338 0.1249692 0.1282270 0.1401247    0
gbm    0.1126345 0.1258033 0.1285686 0.1280873 0.1322026 0.1407843    0

Rsquared 
            Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
ranger 0.7606501 0.7986940 0.8126404 0.8094102 0.8245148 0.8464101    0
xgb    0.7513672 0.7968261 0.8078829 0.8072804 0.8241337 0.8430043    0
gbm    0.7492397 0.7839718 0.7984033 0.7971016 0.8026715 0.8436424    0



$LogRatio1
$LogRatio1$resamps_LR1

Call:
resamples.default(x = list(ranger = models_LR1[[1]], xgb = models_LR1[[2]],
 gbm = models_LR1[[3]]))

Models: ranger, xgb, gbm 
Number of resamples: 10 
Performance metrics: MAE, RMSE, Rsquared 
Time estimates for: everything, final model fit 

$LogRatio1$Dotplot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-17-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
$LogRatio1$Summary

Call:
summary.resamples(object = resamps_LR1)

Models: ranger, xgb, gbm 
Number of resamples: 10 

MAE 
            Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
ranger 0.2411987 0.2938274 0.3141578 0.3116032 0.3339331 0.3556762    0
xgb    0.2634826 0.3192141 0.3432916 0.3368182 0.3574410 0.3886517    0
gbm    0.2585481 0.3085024 0.3305215 0.3289230 0.3575965 0.3743060    0

RMSE 
            Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
ranger 0.3796529 0.4865685 0.5404298 0.5203579 0.5678237 0.5964049    0
xgb    0.4086214 0.5065945 0.5581161 0.5424288 0.5898028 0.6202438    0
gbm    0.4009512 0.5214004 0.5607243 0.5410392 0.5908667 0.6138864    0

Rsquared 
             Min.    1st Qu.    Median      Mean   3rd Qu.      Max. NA's
ranger 0.11731364 0.13113028 0.1769187 0.1905113 0.2220548 0.3739204    0
xgb    0.06317943 0.13825059 0.1600146 0.1538734 0.1786388 0.2297801    0
gbm    0.04681140 0.08501375 0.1411423 0.1358820 0.1728236 0.2524480    0



$LogRatio2
$LogRatio2$resamps_LR2

Call:
resamples.default(x = list(ranger = models_LR2[[1]], xgb = models_LR2[[2]],
 gbm = models_LR2[[3]]))

Models: ranger, xgb, gbm 
Number of resamples: 10 
Performance metrics: MAE, RMSE, Rsquared 
Time estimates for: everything, final model fit 

$LogRatio2$Dotplot</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03_HyperparameterTuning_files/figure-html/unnamed-chunk-17-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
$LogRatio2$Summary

Call:
summary.resamples(object = resamps_LR2)

Models: ranger, xgb, gbm 
Number of resamples: 10 

MAE 
            Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
ranger 0.2999839 0.3105708 0.3341102 0.3301628 0.3439960 0.3657595    0
xgb    0.3143081 0.3184640 0.3387676 0.3436322 0.3686984 0.3853569    0
gbm    0.3192607 0.3259466 0.3369070 0.3441194 0.3538542 0.3928447    0

RMSE 
            Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
ranger 0.4715465 0.5081076 0.5262481 0.5335750 0.5591634 0.6160089    0
xgb    0.4886618 0.5131532 0.5393618 0.5452046 0.5733619 0.6105273    0
gbm    0.4788404 0.5051905 0.5341836 0.5378094 0.5526089 0.6341441    0

Rsquared 
             Min.   1st Qu.    Median      Mean   3rd Qu.      Max. NA's
ranger 0.07138851 0.1580110 0.2000510 0.1858403 0.2274409 0.2706381    0
xgb    0.06998937 0.1186448 0.1439607 0.1597737 0.1855734 0.2791619    0
gbm    0.05721234 0.1155320 0.1598668 0.1752265 0.2456909 0.3076351    0</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save.image("data/RData/03_reduced_hyper_para_tuning_all_models.RData")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./02_rfe.html" class="pagination-link" aria-label="Script 2 - Recursive Feature Selection">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Script 2 - Recursive Feature Selection</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./04_FinalModels.html" class="pagination-link" aria-label="Script 4 - FinalModels">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Script 4 - FinalModels</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/FriedaRosa/Assignment_Statistics_KVHEM_CZU_SS2024/edit/main/03_HyperparameterTuning.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div></div></footer></body></html>